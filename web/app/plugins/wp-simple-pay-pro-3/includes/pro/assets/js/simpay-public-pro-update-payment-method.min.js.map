{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/assertThisInitialized.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/asyncToGenerator.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/createClass.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/defineProperty.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/getPrototypeOf.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/inherits.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/setPrototypeOf.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/helpers/typeof.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/@babel/runtime/regenerator/index.js","webpack:///@wordpress/dom-ready/src/index.js","webpack:///@wordpress/url/src/add-query-args.js","webpack:///@wordpress/url/src/filter-url-for-display.js","webpack:///@wordpress/url/src/get-authority.js","webpack:///@wordpress/url/src/get-fragment.js","webpack:///@wordpress/url/src/get-path.js","webpack:///@wordpress/url/src/get-protocol.js","webpack:///@wordpress/url/src/get-query-arg.js","webpack:///@wordpress/url/src/get-query-string.js","webpack:///@wordpress/url/src/has-query-arg.js","webpack:///@wordpress/url/src/index.js","webpack:///@wordpress/url/src/is-email.js","webpack:///@wordpress/url/src/is-url.js","webpack:///@wordpress/url/src/is-valid-authority.js","webpack:///@wordpress/url/src/is-valid-fragment.js","webpack:///@wordpress/url/src/is-valid-path.js","webpack:///@wordpress/url/src/is-valid-protocol.js","webpack:///@wordpress/url/src/is-valid-query-string.js","webpack:///@wordpress/url/src/prepend-http.js","webpack:///@wordpress/url/src/remove-query-args.js","webpack:///@wordpress/url/src/safe-decode-uri-component.js","webpack:///@wordpress/url/src/safe-decode-uri.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/form-serialize/index.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/qs/lib/formats.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/qs/lib/index.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/qs/lib/parse.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/qs/lib/stringify.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/qs/lib/utils.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/node_modules/regenerator-runtime/runtime.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/includes/core/assets/js/frontend/payments/customer.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/includes/core/assets/js/packages/cart/src/cart.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/includes/core/assets/js/packages/cart/src/index.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/includes/core/assets/js/packages/cart/src/line-item.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/includes/core/assets/js/packages/utils/src/api-request.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/includes/core/assets/js/packages/utils/src/index.js","webpack:////Users/spencerfinnell/dev/wpsimplepay/wp-content/plugins/wp-simple-pay-pro/includes/core/assets/js/packages/utils/src/number.js","webpack:///./js/frontend/payment-forms/stripe-elements/index.js","webpack:///./js/frontend/payment-methods/card/cart/index.js","webpack:///./js/frontend/payment-methods/card/cart/line-item.js","webpack:///./js/frontend/payment-methods/card/index.js","webpack:///./js/frontend/payments/paymentintent.js","webpack:///./js/frontend/payments/subscription.js","webpack:///./js/frontend/update-payment-method.js","webpack:///external \"jQuery\""],"names":["domReady","callback","document","readyState","addEventListener","addQueryArgs","url","args","Object","keys","length","baseUrl","queryStringIndex","indexOf","assign","parse","substr","stringify","filterURLForDisplay","filteredURL","replace","match","getAuthority","matches","exec","getFragment","getPath","getProtocol","getQueryArg","arg","query","getQueryString","hasQueryArg","undefined","EMAIL_REGEXP","isEmail","email","test","URL_REGEXP","isURL","isValidAuthority","authority","isValidFragment","fragment","isValidPath","path","isValidProtocol","protocol","isValidQueryString","queryString","USABLE_HREF_REGEXP","prependHTTP","trim","removeQueryArgs","forEach","safeDecodeURIComponent","uriComponent","decodeURIComponent","uriComponentError","safeDecodeURI","uri","decodeURI","uriError","create","data","spFormElem","formData","apiRequest","form_values","serialize","hash","form_data","form_id","formId","Cart","items","currency","taxPercent","coupon","isNonDecimalCurrency","update","id","message","isNaN","parseFloat","getLineItems","filteredItems","filter","itemId","item","lineitem","LineItem","push","convertFormDataToCartData","window","spShared","debugLog","convertToCents","spGeneral","booleans","isZeroDecimal","stripeParams","amount","isSubscription","quantity","isTrial","planInterval","planIntervalCount","feePercent","feeAmount","setupFee","title","subscription","interval","intervalCount","singleAmount","cart","Number","isSafeInteger","allItems","remainingItems","tax","i","taxDecimal","getTaxDecimal","getQuantity","subtotal","getSubtotal","Math","round","route","jQuery","ajax","method","wpApiSettings","root","beforeSend","xhr","setRequestHeader","nonce","isInteger","value","isFinite","floor","abs","MAX_SAFE_INTEGER","ELEMENTS_DEFAULT_STYLE","base","color","fontFamily","fontSize","fontSmoothing","fontWeight","invalid","iconColor","getElementsStyle","cardEl","getElementById","styleTag","createElement","input","querySelector","innerHTML","body","appendChild","inputStyles","getComputedStyle","placeholderStyles","trbl","map","dir","getPropertyValue","corners","corner","join","getElementsConfig","hidePostalCode","dataset","showPostalCode","style","onError","error","_","isObject","responseJSON","responseText","foundMessage","errorMessage","simpayApp","showError","enableForm","onSubmit","e","preventDefault","disableForm","checkValidity","triggerBrowserValidation","trigger","isValid","createCardPaymentMethod","then","result","handleCardPaymentMethod","catch","setup","isStripeCheckoutForm","realFormElem","submitBtn","addLineItem","setupCardPaymentMethod","getCoupon","discount","amountOff","amount_off","percentOff","percent_off","lineItems","lineItemDiscount","lineItemSubtotal","cartSubtotal","getTax","getDiscount","BaseCart","getUnitPrice","BaseLineItem","handle","createCustomer","source_id","source","customer","successUrl","success_url","customer_id","isRecurring","createSubscription","handleSubscriptionServerResponse","paymentIntentRequiresAction","createPaymentIntent","payment_method_id","paymentIntent","requires_action","location","href","handlePaymentIntentServerResponse","payment_intent","elements","stripeInstance","cardElementInstance","mount","on","owner","getOwnerData","createSource","type","billingAddressContainer","find","name","val","phone","address","line1","city","state","postal_code","country","confirm","handleServerResponse","handleCardAction","payment_intent_client_secret","paymentIntentAction","payment_intent_id","paymentIntentConfirmation","updatePaymentMethod","subscription_id","status","latest_invoice","setupIntent","pending_setup_intent","errorUrl","error_url","paymentIntentStatus","paymentIntentClientSecret","client_secret","paymentIntentError","last_payment_error","handleCardPayment","setupIntentStatus","setupIntentClientSecret","handleCardSetup","handleError","handlePaymentMethodUpdate","subscription_key","_wpnonce","updateSubscriptionPaymentMethod","fail","submitForm","setupForm","formEl","simpayUpdatePaymentMethod","i18n","key","stripe","formDisplayType","checkoutButtonLoadingText","loading","checkoutButtonText","submit","Stripe"],"mappings":";QAAA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;;QAEA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;;;QAGA;QACA;;QAEA;QACA;;QAEA;QACA;QACA;QACA,0CAA0C,gCAAgC;QAC1E;QACA;;QAEA;QACA;QACA;QACA,wDAAwD,kBAAkB;QAC1E;QACA,iDAAiD,cAAc;QAC/D;;QAEA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA,yCAAyC,iCAAiC;QAC1E,gHAAgH,mBAAmB,EAAE;QACrI;QACA;;QAEA;QACA;QACA;QACA,2BAA2B,0BAA0B,EAAE;QACvD,iCAAiC,eAAe;QAChD;QACA;QACA;;QAEA;QACA,sDAAsD,+DAA+D;;QAErH;QACA;;;QAGA;QACA;;;;;;;;;;;;AClFA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,wC;;;;;;;;;;;ACRA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,KAAK;AACL;AACA;;AAEA,mC;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACNA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA,iC;;;;;;;;;;;ACfA;AACA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACPA,qBAAqB,mBAAO,CAAC,wFAAkB;;AAE/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA,2B;;;;;;;;;;;ACjBA,cAAc,mBAAO,CAAC,iFAAmB;;AAEzC,4BAA4B,mBAAO,CAAC,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B;AACA;AACA;AACA;;AAEA,oCAAoC;AACpC;;AAEA;;AAEA;AACA;;AAEA,kBAAkB,oBAAoB;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,yBAAyB;AACnD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;;ACnQa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;;;;;;;;;;;;ACjBa;;AAEb,gBAAgB,mBAAO,CAAC,8DAAa;AACrC,YAAY,mBAAO,CAAC,sDAAS;AAC7B,cAAc,mBAAO,CAAC,0DAAW;;AAEjC;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACVa;;AAEb,YAAY,mBAAO,CAAC,sDAAS;;AAE7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,mBAAmB,kBAAkB;AACrC;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,kCAAkC,QAAQ;AAC1C;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,wCAAwC;;AAExC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;AC7Ka;;AAEb,YAAY,mBAAO,CAAC,sDAAS;AAC7B,cAAc,mBAAO,CAAC,0DAAW;;AAEjC;AACA,yCAAyC;AACzC;AACA,KAAK;AACL,4CAA4C;AAC5C;AACA,KAAK;AACL,qCAAqC;AACrC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,mBAAmB,oBAAoB;AACvC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,wCAAwC;;AAExC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,mBAAmB,oBAAoB;AACvC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;ACjNa;;AAEb;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;;AAEA;AACA,CAAC;;AAED;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,2BAA2B,gBAAgB;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA,aAAa;AACb;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,mBAAmB,mBAAmB;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,kBAAkB,OAAO,WAAW,aAAa;AACjD;;AAEA,mBAAmB,kBAAkB;AACrC;AACA;;AAEA;AACA,uBAAuB,iBAAiB;AACxC;AACA;AACA;AACA,4BAA4B,sBAAsB;AAClD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpNA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,WAAW;AACX;;AAEA;AACA;AACA,wCAAwC,WAAW;AACnD;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,2BAA2B;AAC3B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;AAEA,SAAS;AACT;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,kBAAkB;AACnD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;;AAEjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,YAAY;AACZ;AACA;;AAEA;AACA,YAAY;AACZ;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,8CAA8C,QAAQ;AACtD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;;AAEA,WAAW;AACX;AACA;AACA;AACA;AACA,KAAK;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","file":"simpay-public-pro-update-payment-method.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/frontend/update-payment-method.js\");\n","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","module.exports = require(\"regenerator-runtime\");\n","/**\n * @typedef {() => void} Callback\n *\n * TODO: Remove this typedef and inline `() => void` type.\n *\n * This typedef is used so that a descriptive type is provided in our\n * automatically generated documentation.\n *\n * An in-line type `() => void` would be preferable, but the generated\n * documentation is `null` in that case.\n *\n * @see https://github.com/WordPress/gutenberg/issues/18045\n */\n\n/**\n * Specify a function to execute when the DOM is fully loaded.\n *\n * @param {Callback} callback A function to execute after the DOM is ready.\n *\n * @example\n * ```js\n * import domReady from '@wordpress/dom-ready';\n *\n * domReady( function() {\n * \t//do something after DOM loads.\n * } );\n * ```\n *\n * @return {void}\n */\nexport default function domReady( callback ) {\n\tif (\n\t\tdocument.readyState === 'complete' || // DOMContentLoaded + Images/Styles/etc loaded, so we call directly.\n\t\tdocument.readyState === 'interactive' // DOMContentLoaded fires at this point, so we call directly.\n\t) {\n\t\treturn void callback();\n\t}\n\n\t// DOMContentLoaded has not fired yet, delay callback until then.\n\tdocument.addEventListener( 'DOMContentLoaded', callback );\n}\n","/**\n * External dependencies\n */\nimport { parse, stringify } from 'qs';\n\n/**\n * Appends arguments as querystring to the provided URL. If the URL already\n * includes query arguments, the arguments are merged with (and take precedent\n * over) the existing set.\n *\n * @param {string} [url='']  URL to which arguments should be appended. If omitted,\n *                           only the resulting querystring is returned.\n * @param {Object} args      Query arguments to apply to URL.\n *\n * @example\n * ```js\n * const newURL = addQueryArgs( 'https://google.com', { q: 'test' } ); // https://google.com/?q=test\n * ```\n *\n * @return {string} URL with arguments applied.\n */\nexport function addQueryArgs( url = '', args ) {\n\t// If no arguments are to be appended, return original URL.\n\tif ( ! args || ! Object.keys( args ).length ) {\n\t\treturn url;\n\t}\n\n\tlet baseUrl = url;\n\n\t// Determine whether URL already had query arguments.\n\tconst queryStringIndex = url.indexOf( '?' );\n\tif ( queryStringIndex !== -1 ) {\n\t\t// Merge into existing query arguments.\n\t\targs = Object.assign(\n\t\t\tparse( url.substr( queryStringIndex + 1 ) ),\n\t\t\targs\n\t\t);\n\n\t\t// Change working base URL to omit previous query arguments.\n\t\tbaseUrl = baseUrl.substr( 0, queryStringIndex );\n\t}\n\n\treturn baseUrl + '?' + stringify( args );\n}\n","/**\n * Returns a URL for display.\n *\n * @param {string} url Original URL.\n *\n * @example\n * ```js\n * const displayUrl = filterURLForDisplay( 'https://www.wordpress.org/gutenberg/' ); // wordpress.org/gutenberg\n * ```\n *\n * @return {string} Displayed URL.\n */\nexport function filterURLForDisplay( url ) {\n\t// Remove protocol and www prefixes.\n\tconst filteredURL = url.replace( /^(?:https?:)\\/\\/(?:www\\.)?/, '' );\n\n\t// Ends with / and only has that single slash, strip it.\n\tif ( filteredURL.match( /^[^\\/]+\\/$/ ) ) {\n\t\treturn filteredURL.replace( '/', '' );\n\t}\n\n\treturn filteredURL;\n}\n","/**\n * Returns the authority part of the URL.\n *\n * @param {string} url The full URL.\n *\n * @example\n * ```js\n * const authority1 = getAuthority( 'https://wordpress.org/help/' ); // 'wordpress.org'\n * const authority2 = getAuthority( 'https://localhost:8080/test/' ); // 'localhost:8080'\n * ```\n *\n * @return {string|void} The authority part of the URL.\n */\nexport function getAuthority( url ) {\n\tconst matches = /^[^\\/\\s:]+:(?:\\/\\/)?\\/?([^\\/\\s#?]+)[\\/#?]{0,1}\\S*$/.exec( url );\n\tif ( matches ) {\n\t\treturn matches[ 1 ];\n\t}\n}\n","/**\n * Returns the fragment part of the URL.\n *\n * @param {string} url The full URL\n *\n * @example\n * ```js\n * const fragment1 = getFragment( 'http://localhost:8080/this/is/a/test?query=true#fragment' ); // '#fragment'\n * const fragment2 = getFragment( 'https://wordpress.org#another-fragment?query=true' ); // '#another-fragment'\n * ```\n *\n * @return {string|void} The fragment part of the URL.\n */\nexport function getFragment( url ) {\n\tconst matches = /^\\S+?(#[^\\s\\?]*)/.exec( url );\n\tif ( matches ) {\n\t\treturn matches[ 1 ];\n\t}\n}\n","/**\n * Returns the path part of the URL.\n *\n * @param {string} url The full URL.\n *\n * @example\n * ```js\n * const path1 = getPath( 'http://localhost:8080/this/is/a/test?query=true' ); // 'this/is/a/test'\n * const path2 = getPath( 'https://wordpress.org/help/faq/' ); // 'help/faq'\n * ```\n *\n * @return {string|void} The path part of the URL.\n */\nexport function getPath( url ) {\n\tconst matches = /^[^\\/\\s:]+:(?:\\/\\/)?[^\\/\\s#?]+[\\/]([^\\s#?]+)[#?]{0,1}\\S*$/.exec( url );\n\tif ( matches ) {\n\t\treturn matches[ 1 ];\n\t}\n}\n","/**\n * Returns the protocol part of the URL.\n *\n * @param {string} url The full URL.\n *\n * @example\n * ```js\n * const protocol1 = getProtocol( 'tel:012345678' ); // 'tel:'\n * const protocol2 = getProtocol( 'https://wordpress.org' ); // 'https:'\n * ```\n *\n * @return {string|void} The protocol part of the URL.\n */\nexport function getProtocol( url ) {\n\tconst matches = /^([^\\s:]+:)/.exec( url );\n\tif ( matches ) {\n\t\treturn matches[ 1 ];\n\t}\n}\n","/**\n * External dependencies\n */\nimport { parse } from 'qs';\n\n/**\n * @typedef {{[key: string]: QueryArgParsed}} QueryArgObject\n */\n\n/**\n * @typedef {string|string[]|QueryArgObject} QueryArgParsed\n */\n\n/**\n * Returns a single query argument of the url\n *\n * @param {string} url URL.\n * @param {string} arg Query arg name.\n *\n * @example\n * ```js\n * const foo = getQueryArg( 'https://wordpress.org?foo=bar&bar=baz', 'foo' ); // bar\n * ```\n *\n * @return {QueryArgParsed|undefined} Query arg value.\n */\nexport function getQueryArg( url, arg ) {\n\tconst queryStringIndex = url.indexOf( '?' );\n\tconst query = queryStringIndex !== -1 ? parse( url.substr( queryStringIndex + 1 ) ) : {};\n\n\treturn query[ arg ];\n}\n","/**\n * Returns the query string part of the URL.\n *\n * @param {string} url The full URL.\n *\n * @example\n * ```js\n * const queryString1 = getQueryString( 'http://localhost:8080/this/is/a/test?query=true#fragment' ); // 'query=true'\n * const queryString2 = getQueryString( 'https://wordpress.org#fragment?query=false&search=hello' ); // 'query=false&search=hello'\n * ```\n *\n * @return {string|void} The query string part of the URL.\n */\nexport function getQueryString( url ) {\n\tconst matches = /^\\S+?\\?([^\\s#]+)/.exec( url );\n\tif ( matches ) {\n\t\treturn matches[ 1 ];\n\t}\n}\n","/**\n * Internal dependencies\n */\nimport { getQueryArg } from './get-query-arg';\n\n/**\n * Determines whether the URL contains a given query arg.\n *\n * @param {string} url URL.\n * @param {string} arg Query arg name.\n *\n * @example\n * ```js\n * const hasBar = hasQueryArg( 'https://wordpress.org?foo=bar&bar=baz', 'bar' ); // true\n * ```\n *\n * @return {boolean} Whether or not the URL contains the query arg.\n */\nexport function hasQueryArg( url, arg ) {\n\treturn getQueryArg( url, arg ) !== undefined;\n}\n","export { isURL } from './is-url';\nexport { isEmail } from './is-email';\nexport { getProtocol } from './get-protocol';\nexport { isValidProtocol } from './is-valid-protocol';\nexport { getAuthority } from './get-authority';\nexport { isValidAuthority } from './is-valid-authority';\nexport { getPath } from './get-path';\nexport { isValidPath } from './is-valid-path';\nexport { getQueryString } from './get-query-string';\nexport { isValidQueryString } from './is-valid-query-string';\nexport { getFragment } from './get-fragment';\nexport { isValidFragment } from './is-valid-fragment';\nexport { addQueryArgs } from './add-query-args';\nexport { getQueryArg } from './get-query-arg';\nexport { hasQueryArg } from './has-query-arg';\nexport { removeQueryArgs } from './remove-query-args';\nexport { prependHTTP } from './prepend-http';\nexport { safeDecodeURI } from './safe-decode-uri';\nexport { safeDecodeURIComponent } from './safe-decode-uri-component';\nexport { filterURLForDisplay } from './filter-url-for-display';\n","const EMAIL_REGEXP = /^(mailto:)?[a-z0-9._%+-]+@[a-z0-9][a-z0-9.-]*\\.[a-z]{2,63}$/i;\n\n/**\n * Determines whether the given string looks like an email.\n *\n * @param {string} email The string to scrutinise.\n *\n * @example\n * ```js\n * const isEmail = isEmail( 'hello@wordpress.org' ); // true\n * ```\n *\n * @return {boolean} Whether or not it looks like an email.\n */\nexport function isEmail( email ) {\n\treturn EMAIL_REGEXP.test( email );\n}\n","const URL_REGEXP = /^(?:https?:)?\\/\\/\\S+$/i;\n\n/**\n * Determines whether the given string looks like a URL.\n *\n * @param {string} url The string to scrutinise.\n *\n * @example\n * ```js\n * const isURL = isURL( 'https://wordpress.org' ); // true\n * ```\n *\n * @return {boolean} Whether or not it looks like a URL.\n */\nexport function isURL( url ) {\n\treturn URL_REGEXP.test( url );\n}\n","/**\n * Checks for invalid characters within the provided authority.\n *\n * @param {string} authority A string containing the URL authority.\n *\n * @example\n * ```js\n * const isValid = isValidAuthority( 'wordpress.org' ); // true\n * const isNotValid = isValidAuthority( 'wordpress#org' ); // false\n * ```\n *\n * @return {boolean} True if the argument contains a valid authority.\n */\nexport function isValidAuthority( authority ) {\n\tif ( ! authority ) {\n\t\treturn false;\n\t}\n\treturn /^[^\\s#?]+$/.test( authority );\n}\n","/**\n * Checks for invalid characters within the provided fragment.\n *\n * @param {string} fragment The url fragment.\n *\n * @example\n * ```js\n * const isValid = isValidFragment( '#valid-fragment' ); // true\n * const isNotValid = isValidFragment( '#invalid-#fragment' ); // false\n * ```\n *\n * @return {boolean} True if the argument contains a valid fragment.\n */\nexport function isValidFragment( fragment ) {\n\tif ( ! fragment ) {\n\t\treturn false;\n\t}\n\treturn /^#[^\\s#?\\/]*$/.test( fragment );\n}\n","/**\n * Checks for invalid characters within the provided path.\n *\n * @param {string} path The URL path.\n *\n * @example\n * ```js\n * const isValid = isValidPath( 'test/path/' ); // true\n * const isNotValid = isValidPath( '/invalid?test/path/' ); // false\n * ```\n *\n * @return {boolean} True if the argument contains a valid path\n */\nexport function isValidPath( path ) {\n\tif ( ! path ) {\n\t\treturn false;\n\t}\n\treturn /^[^\\s#?]+$/.test( path );\n}\n","/**\n * Tests if a url protocol is valid.\n *\n * @param {string} protocol The url protocol.\n *\n * @example\n * ```js\n * const isValid = isValidProtocol( 'https:' ); // true\n * const isNotValid = isValidProtocol( 'https :' ); // false\n * ```\n *\n * @return {boolean} True if the argument is a valid protocol (e.g. http:, tel:).\n */\nexport function isValidProtocol( protocol ) {\n\tif ( ! protocol ) {\n\t\treturn false;\n\t}\n\treturn /^[a-z\\-.\\+]+[0-9]*:$/i.test( protocol );\n}\n","/**\n * Checks for invalid characters within the provided query string.\n *\n * @param {string} queryString The query string.\n *\n * @example\n * ```js\n * const isValid = isValidQueryString( 'query=true&another=false' ); // true\n * const isNotValid = isValidQueryString( 'query=true?another=false' ); // false\n * ```\n *\n * @return {boolean} True if the argument contains a valid query string.\n */\nexport function isValidQueryString( queryString ) {\n\tif ( ! queryString ) {\n\t\treturn false;\n\t}\n\treturn /^[^\\s#?\\/]+$/.test( queryString );\n}\n","/**\n * Internal dependencies\n */\nimport { isEmail } from './is-email';\n\nconst USABLE_HREF_REGEXP = /^(?:[a-z]+:|#|\\?|\\.|\\/)/i;\n\n/**\n * Prepends \"http://\" to a url, if it looks like something that is meant to be a TLD.\n *\n * @param {string} url The URL to test.\n *\n * @example\n * ```js\n * const actualURL = prependHTTP( 'wordpress.org' ); // http://wordpress.org\n * ```\n *\n * @return {string} The updated URL.\n */\nexport function prependHTTP( url ) {\n\tif ( ! url ) {\n\t\treturn url;\n\t}\n\n\turl = url.trim();\n\tif ( ! USABLE_HREF_REGEXP.test( url ) && ! isEmail( url ) ) {\n\t\treturn 'http://' + url;\n\t}\n\n\treturn url;\n}\n","/**\n * External dependencies\n */\nimport { parse, stringify } from 'qs';\n\n/**\n * Removes arguments from the query string of the url\n *\n * @param {string}    url  URL.\n * @param {...string} args Query Args.\n *\n * @example\n * ```js\n * const newUrl = removeQueryArgs( 'https://wordpress.org?foo=bar&bar=baz&baz=foobar', 'foo', 'bar' ); // https://wordpress.org?baz=foobar\n * ```\n *\n * @return {string} Updated URL.\n */\nexport function removeQueryArgs( url, ...args ) {\n\tconst queryStringIndex = url.indexOf( '?' );\n\tconst query = queryStringIndex !== -1 ? parse( url.substr( queryStringIndex + 1 ) ) : {};\n\tconst baseUrl = queryStringIndex !== -1 ? url.substr( 0, queryStringIndex ) : url;\n\n\targs.forEach( ( arg ) => delete query[ arg ] );\n\n\treturn baseUrl + '?' + stringify( query );\n}\n","/**\n * Safely decodes a URI component with `decodeURIComponent`. Returns the URI component unmodified if\n * `decodeURIComponent` throws an error.\n *\n * @param {string} uriComponent URI component to decode.\n *\n * @return {string} Decoded URI component if possible.\n */\nexport function safeDecodeURIComponent( uriComponent ) {\n\ttry {\n\t\treturn decodeURIComponent( uriComponent );\n\t} catch ( uriComponentError ) {\n\t\treturn uriComponent;\n\t}\n}\n","/**\n * Safely decodes a URI with `decodeURI`. Returns the URI unmodified if\n * `decodeURI` throws an error.\n *\n * @param {string} uri URI to decode.\n *\n * @example\n * ```js\n * const badUri = safeDecodeURI( '%z' ); // does not throw an Error, simply returns '%z'\n * ```\n *\n * @return {string} Decoded URI if possible.\n */\nexport function safeDecodeURI( uri ) {\n\ttry {\n\t\treturn decodeURI( uri );\n\t} catch ( uriError ) {\n\t\treturn uri;\n\t}\n}\n","// get successful control from form and assemble into object\n// http://www.w3.org/TR/html401/interact/forms.html#h-17.13.2\n\n// types which indicate a submit action and are not successful controls\n// these will be ignored\nvar k_r_submitter = /^(?:submit|button|image|reset|file)$/i;\n\n// node names which could be successful controls\nvar k_r_success_contrls = /^(?:input|select|textarea|keygen)/i;\n\n// Matches bracket notation.\nvar brackets = /(\\[[^\\[\\]]*\\])/g;\n\n// serializes form fields\n// @param form MUST be an HTMLForm element\n// @param options is an optional argument to configure the serialization. Default output\n// with no options specified is a url encoded string\n//    - hash: [true | false] Configure the output type. If true, the output will\n//    be a js object.\n//    - serializer: [function] Optional serializer function to override the default one.\n//    The function takes 3 arguments (result, key, value) and should return new result\n//    hash and url encoded str serializers are provided with this module\n//    - disabled: [true | false]. If true serialize disabled fields.\n//    - empty: [true | false]. If true serialize empty fields\nfunction serialize(form, options) {\n    if (typeof options != 'object') {\n        options = { hash: !!options };\n    }\n    else if (options.hash === undefined) {\n        options.hash = true;\n    }\n\n    var result = (options.hash) ? {} : '';\n    var serializer = options.serializer || ((options.hash) ? hash_serializer : str_serialize);\n\n    var elements = form && form.elements ? form.elements : [];\n\n    //Object store each radio and set if it's empty or not\n    var radio_store = Object.create(null);\n\n    for (var i=0 ; i<elements.length ; ++i) {\n        var element = elements[i];\n\n        // ingore disabled fields\n        if ((!options.disabled && element.disabled) || !element.name) {\n            continue;\n        }\n        // ignore anyhting that is not considered a success field\n        if (!k_r_success_contrls.test(element.nodeName) ||\n            k_r_submitter.test(element.type)) {\n            continue;\n        }\n\n        var key = element.name;\n        var val = element.value;\n\n        // we can't just use element.value for checkboxes cause some browsers lie to us\n        // they say \"on\" for value when the box isn't checked\n        if ((element.type === 'checkbox' || element.type === 'radio') && !element.checked) {\n            val = undefined;\n        }\n\n        // If we want empty elements\n        if (options.empty) {\n            // for checkbox\n            if (element.type === 'checkbox' && !element.checked) {\n                val = '';\n            }\n\n            // for radio\n            if (element.type === 'radio') {\n                if (!radio_store[element.name] && !element.checked) {\n                    radio_store[element.name] = false;\n                }\n                else if (element.checked) {\n                    radio_store[element.name] = true;\n                }\n            }\n\n            // if options empty is true, continue only if its radio\n            if (val == undefined && element.type == 'radio') {\n                continue;\n            }\n        }\n        else {\n            // value-less fields are ignored unless options.empty is true\n            if (!val) {\n                continue;\n            }\n        }\n\n        // multi select boxes\n        if (element.type === 'select-multiple') {\n            val = [];\n\n            var selectOptions = element.options;\n            var isSelectedOptions = false;\n            for (var j=0 ; j<selectOptions.length ; ++j) {\n                var option = selectOptions[j];\n                var allowedEmpty = options.empty && !option.value;\n                var hasValue = (option.value || allowedEmpty);\n                if (option.selected && hasValue) {\n                    isSelectedOptions = true;\n\n                    // If using a hash serializer be sure to add the\n                    // correct notation for an array in the multi-select\n                    // context. Here the name attribute on the select element\n                    // might be missing the trailing bracket pair. Both names\n                    // \"foo\" and \"foo[]\" should be arrays.\n                    if (options.hash && key.slice(key.length - 2) !== '[]') {\n                        result = serializer(result, key + '[]', option.value);\n                    }\n                    else {\n                        result = serializer(result, key, option.value);\n                    }\n                }\n            }\n\n            // Serialize if no selected options and options.empty is true\n            if (!isSelectedOptions && options.empty) {\n                result = serializer(result, key, '');\n            }\n\n            continue;\n        }\n\n        result = serializer(result, key, val);\n    }\n\n    // Check for all empty radio buttons and serialize them with key=\"\"\n    if (options.empty) {\n        for (var key in radio_store) {\n            if (!radio_store[key]) {\n                result = serializer(result, key, '');\n            }\n        }\n    }\n\n    return result;\n}\n\nfunction parse_keys(string) {\n    var keys = [];\n    var prefix = /^([^\\[\\]]*)/;\n    var children = new RegExp(brackets);\n    var match = prefix.exec(string);\n\n    if (match[1]) {\n        keys.push(match[1]);\n    }\n\n    while ((match = children.exec(string)) !== null) {\n        keys.push(match[1]);\n    }\n\n    return keys;\n}\n\nfunction hash_assign(result, keys, value) {\n    if (keys.length === 0) {\n        result = value;\n        return result;\n    }\n\n    var key = keys.shift();\n    var between = key.match(/^\\[(.+?)\\]$/);\n\n    if (key === '[]') {\n        result = result || [];\n\n        if (Array.isArray(result)) {\n            result.push(hash_assign(null, keys, value));\n        }\n        else {\n            // This might be the result of bad name attributes like \"[][foo]\",\n            // in this case the original `result` object will already be\n            // assigned to an object literal. Rather than coerce the object to\n            // an array, or cause an exception the attribute \"_values\" is\n            // assigned as an array.\n            result._values = result._values || [];\n            result._values.push(hash_assign(null, keys, value));\n        }\n\n        return result;\n    }\n\n    // Key is an attribute name and can be assigned directly.\n    if (!between) {\n        result[key] = hash_assign(result[key], keys, value);\n    }\n    else {\n        var string = between[1];\n        // +var converts the variable into a number\n        // better than parseInt because it doesn't truncate away trailing\n        // letters and actually fails if whole thing is not a number\n        var index = +string;\n\n        // If the characters between the brackets is not a number it is an\n        // attribute name and can be assigned directly.\n        if (isNaN(index)) {\n            result = result || {};\n            result[string] = hash_assign(result[string], keys, value);\n        }\n        else {\n            result = result || [];\n            result[index] = hash_assign(result[index], keys, value);\n        }\n    }\n\n    return result;\n}\n\n// Object/hash encoding serializer.\nfunction hash_serializer(result, key, value) {\n    var matches = key.match(brackets);\n\n    // Has brackets? Use the recursive assignment function to walk the keys,\n    // construct any missing objects in the result tree and make the assignment\n    // at the end of the chain.\n    if (matches) {\n        var keys = parse_keys(key);\n        hash_assign(result, keys, value);\n    }\n    else {\n        // Non bracket notation can make assignments directly.\n        var existing = result[key];\n\n        // If the value has been assigned already (for instance when a radio and\n        // a checkbox have the same name attribute) convert the previous value\n        // into an array before pushing into it.\n        //\n        // NOTE: If this requirement were removed all hash creation and\n        // assignment could go through `hash_assign`.\n        if (existing) {\n            if (!Array.isArray(existing)) {\n                result[key] = [ existing ];\n            }\n\n            result[key].push(value);\n        }\n        else {\n            result[key] = value;\n        }\n    }\n\n    return result;\n}\n\n// urlform encoding serializer\nfunction str_serialize(result, key, value) {\n    // encode newlines as \\r\\n cause the html spec says so\n    value = value.replace(/(\\r)?\\n/g, '\\r\\n');\n    value = encodeURIComponent(value);\n\n    // spaces should be '+' rather than '%20'.\n    value = value.replace(/%20/g, '+');\n    return result + (result ? '&' : '') + encodeURIComponent(key) + '=' + value;\n}\n\nmodule.exports = serialize;\n","'use strict';\n\nvar replace = String.prototype.replace;\nvar percentTwenties = /%20/g;\n\nmodule.exports = {\n    'default': 'RFC3986',\n    formatters: {\n        RFC1738: function (value) {\n            return replace.call(value, percentTwenties, '+');\n        },\n        RFC3986: function (value) {\n            return value;\n        }\n    },\n    RFC1738: 'RFC1738',\n    RFC3986: 'RFC3986'\n};\n","'use strict';\n\nvar stringify = require('./stringify');\nvar parse = require('./parse');\nvar formats = require('./formats');\n\nmodule.exports = {\n    formats: formats,\n    parse: parse,\n    stringify: stringify\n};\n","'use strict';\n\nvar utils = require('./utils');\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar defaults = {\n    allowDots: false,\n    allowPrototypes: false,\n    arrayLimit: 20,\n    decoder: utils.decode,\n    delimiter: '&',\n    depth: 5,\n    parameterLimit: 1000,\n    plainObjects: false,\n    strictNullHandling: false\n};\n\nvar parseValues = function parseQueryStringValues(str, options) {\n    var obj = {};\n    var cleanStr = options.ignoreQueryPrefix ? str.replace(/^\\?/, '') : str;\n    var limit = options.parameterLimit === Infinity ? undefined : options.parameterLimit;\n    var parts = cleanStr.split(options.delimiter, limit);\n\n    for (var i = 0; i < parts.length; ++i) {\n        var part = parts[i];\n\n        var bracketEqualsPos = part.indexOf(']=');\n        var pos = bracketEqualsPos === -1 ? part.indexOf('=') : bracketEqualsPos + 1;\n\n        var key, val;\n        if (pos === -1) {\n            key = options.decoder(part, defaults.decoder);\n            val = options.strictNullHandling ? null : '';\n        } else {\n            key = options.decoder(part.slice(0, pos), defaults.decoder);\n            val = options.decoder(part.slice(pos + 1), defaults.decoder);\n        }\n        if (has.call(obj, key)) {\n            obj[key] = [].concat(obj[key]).concat(val);\n        } else {\n            obj[key] = val;\n        }\n    }\n\n    return obj;\n};\n\nvar parseObject = function (chain, val, options) {\n    var leaf = val;\n\n    for (var i = chain.length - 1; i >= 0; --i) {\n        var obj;\n        var root = chain[i];\n\n        if (root === '[]') {\n            obj = [];\n            obj = obj.concat(leaf);\n        } else {\n            obj = options.plainObjects ? Object.create(null) : {};\n            var cleanRoot = root.charAt(0) === '[' && root.charAt(root.length - 1) === ']' ? root.slice(1, -1) : root;\n            var index = parseInt(cleanRoot, 10);\n            if (\n                !isNaN(index)\n                && root !== cleanRoot\n                && String(index) === cleanRoot\n                && index >= 0\n                && (options.parseArrays && index <= options.arrayLimit)\n            ) {\n                obj = [];\n                obj[index] = leaf;\n            } else {\n                obj[cleanRoot] = leaf;\n            }\n        }\n\n        leaf = obj;\n    }\n\n    return leaf;\n};\n\nvar parseKeys = function parseQueryStringKeys(givenKey, val, options) {\n    if (!givenKey) {\n        return;\n    }\n\n    // Transform dot notation to bracket notation\n    var key = options.allowDots ? givenKey.replace(/\\.([^.[]+)/g, '[$1]') : givenKey;\n\n    // The regex chunks\n\n    var brackets = /(\\[[^[\\]]*])/;\n    var child = /(\\[[^[\\]]*])/g;\n\n    // Get the parent\n\n    var segment = brackets.exec(key);\n    var parent = segment ? key.slice(0, segment.index) : key;\n\n    // Stash the parent if it exists\n\n    var keys = [];\n    if (parent) {\n        // If we aren't using plain objects, optionally prefix keys\n        // that would overwrite object prototype properties\n        if (!options.plainObjects && has.call(Object.prototype, parent)) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n\n        keys.push(parent);\n    }\n\n    // Loop through children appending to the array until we hit depth\n\n    var i = 0;\n    while ((segment = child.exec(key)) !== null && i < options.depth) {\n        i += 1;\n        if (!options.plainObjects && has.call(Object.prototype, segment[1].slice(1, -1))) {\n            if (!options.allowPrototypes) {\n                return;\n            }\n        }\n        keys.push(segment[1]);\n    }\n\n    // If there's a remainder, just add whatever is left\n\n    if (segment) {\n        keys.push('[' + key.slice(segment.index) + ']');\n    }\n\n    return parseObject(keys, val, options);\n};\n\nmodule.exports = function (str, opts) {\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.decoder !== null && options.decoder !== undefined && typeof options.decoder !== 'function') {\n        throw new TypeError('Decoder has to be a function.');\n    }\n\n    options.ignoreQueryPrefix = options.ignoreQueryPrefix === true;\n    options.delimiter = typeof options.delimiter === 'string' || utils.isRegExp(options.delimiter) ? options.delimiter : defaults.delimiter;\n    options.depth = typeof options.depth === 'number' ? options.depth : defaults.depth;\n    options.arrayLimit = typeof options.arrayLimit === 'number' ? options.arrayLimit : defaults.arrayLimit;\n    options.parseArrays = options.parseArrays !== false;\n    options.decoder = typeof options.decoder === 'function' ? options.decoder : defaults.decoder;\n    options.allowDots = typeof options.allowDots === 'boolean' ? options.allowDots : defaults.allowDots;\n    options.plainObjects = typeof options.plainObjects === 'boolean' ? options.plainObjects : defaults.plainObjects;\n    options.allowPrototypes = typeof options.allowPrototypes === 'boolean' ? options.allowPrototypes : defaults.allowPrototypes;\n    options.parameterLimit = typeof options.parameterLimit === 'number' ? options.parameterLimit : defaults.parameterLimit;\n    options.strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n\n    if (str === '' || str === null || typeof str === 'undefined') {\n        return options.plainObjects ? Object.create(null) : {};\n    }\n\n    var tempObj = typeof str === 'string' ? parseValues(str, options) : str;\n    var obj = options.plainObjects ? Object.create(null) : {};\n\n    // Iterate over the keys and setup the new object\n\n    var keys = Object.keys(tempObj);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var newObj = parseKeys(key, tempObj[key], options);\n        obj = utils.merge(obj, newObj, options);\n    }\n\n    return utils.compact(obj);\n};\n","'use strict';\n\nvar utils = require('./utils');\nvar formats = require('./formats');\n\nvar arrayPrefixGenerators = {\n    brackets: function brackets(prefix) { // eslint-disable-line func-name-matching\n        return prefix + '[]';\n    },\n    indices: function indices(prefix, key) { // eslint-disable-line func-name-matching\n        return prefix + '[' + key + ']';\n    },\n    repeat: function repeat(prefix) { // eslint-disable-line func-name-matching\n        return prefix;\n    }\n};\n\nvar toISO = Date.prototype.toISOString;\n\nvar defaults = {\n    delimiter: '&',\n    encode: true,\n    encoder: utils.encode,\n    encodeValuesOnly: false,\n    serializeDate: function serializeDate(date) { // eslint-disable-line func-name-matching\n        return toISO.call(date);\n    },\n    skipNulls: false,\n    strictNullHandling: false\n};\n\nvar stringify = function stringify( // eslint-disable-line func-name-matching\n    object,\n    prefix,\n    generateArrayPrefix,\n    strictNullHandling,\n    skipNulls,\n    encoder,\n    filter,\n    sort,\n    allowDots,\n    serializeDate,\n    formatter,\n    encodeValuesOnly\n) {\n    var obj = object;\n    if (typeof filter === 'function') {\n        obj = filter(prefix, obj);\n    } else if (obj instanceof Date) {\n        obj = serializeDate(obj);\n    } else if (obj === null) {\n        if (strictNullHandling) {\n            return encoder && !encodeValuesOnly ? encoder(prefix, defaults.encoder) : prefix;\n        }\n\n        obj = '';\n    }\n\n    if (typeof obj === 'string' || typeof obj === 'number' || typeof obj === 'boolean' || utils.isBuffer(obj)) {\n        if (encoder) {\n            var keyValue = encodeValuesOnly ? prefix : encoder(prefix, defaults.encoder);\n            return [formatter(keyValue) + '=' + formatter(encoder(obj, defaults.encoder))];\n        }\n        return [formatter(prefix) + '=' + formatter(String(obj))];\n    }\n\n    var values = [];\n\n    if (typeof obj === 'undefined') {\n        return values;\n    }\n\n    var objKeys;\n    if (Array.isArray(filter)) {\n        objKeys = filter;\n    } else {\n        var keys = Object.keys(obj);\n        objKeys = sort ? keys.sort(sort) : keys;\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        if (Array.isArray(obj)) {\n            values = values.concat(stringify(\n                obj[key],\n                generateArrayPrefix(prefix, key),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        } else {\n            values = values.concat(stringify(\n                obj[key],\n                prefix + (allowDots ? '.' + key : '[' + key + ']'),\n                generateArrayPrefix,\n                strictNullHandling,\n                skipNulls,\n                encoder,\n                filter,\n                sort,\n                allowDots,\n                serializeDate,\n                formatter,\n                encodeValuesOnly\n            ));\n        }\n    }\n\n    return values;\n};\n\nmodule.exports = function (object, opts) {\n    var obj = object;\n    var options = opts ? utils.assign({}, opts) : {};\n\n    if (options.encoder !== null && options.encoder !== undefined && typeof options.encoder !== 'function') {\n        throw new TypeError('Encoder has to be a function.');\n    }\n\n    var delimiter = typeof options.delimiter === 'undefined' ? defaults.delimiter : options.delimiter;\n    var strictNullHandling = typeof options.strictNullHandling === 'boolean' ? options.strictNullHandling : defaults.strictNullHandling;\n    var skipNulls = typeof options.skipNulls === 'boolean' ? options.skipNulls : defaults.skipNulls;\n    var encode = typeof options.encode === 'boolean' ? options.encode : defaults.encode;\n    var encoder = typeof options.encoder === 'function' ? options.encoder : defaults.encoder;\n    var sort = typeof options.sort === 'function' ? options.sort : null;\n    var allowDots = typeof options.allowDots === 'undefined' ? false : options.allowDots;\n    var serializeDate = typeof options.serializeDate === 'function' ? options.serializeDate : defaults.serializeDate;\n    var encodeValuesOnly = typeof options.encodeValuesOnly === 'boolean' ? options.encodeValuesOnly : defaults.encodeValuesOnly;\n    if (typeof options.format === 'undefined') {\n        options.format = formats['default'];\n    } else if (!Object.prototype.hasOwnProperty.call(formats.formatters, options.format)) {\n        throw new TypeError('Unknown format option provided.');\n    }\n    var formatter = formats.formatters[options.format];\n    var objKeys;\n    var filter;\n\n    if (typeof options.filter === 'function') {\n        filter = options.filter;\n        obj = filter('', obj);\n    } else if (Array.isArray(options.filter)) {\n        filter = options.filter;\n        objKeys = filter;\n    }\n\n    var keys = [];\n\n    if (typeof obj !== 'object' || obj === null) {\n        return '';\n    }\n\n    var arrayFormat;\n    if (options.arrayFormat in arrayPrefixGenerators) {\n        arrayFormat = options.arrayFormat;\n    } else if ('indices' in options) {\n        arrayFormat = options.indices ? 'indices' : 'repeat';\n    } else {\n        arrayFormat = 'indices';\n    }\n\n    var generateArrayPrefix = arrayPrefixGenerators[arrayFormat];\n\n    if (!objKeys) {\n        objKeys = Object.keys(obj);\n    }\n\n    if (sort) {\n        objKeys.sort(sort);\n    }\n\n    for (var i = 0; i < objKeys.length; ++i) {\n        var key = objKeys[i];\n\n        if (skipNulls && obj[key] === null) {\n            continue;\n        }\n\n        keys = keys.concat(stringify(\n            obj[key],\n            key,\n            generateArrayPrefix,\n            strictNullHandling,\n            skipNulls,\n            encode ? encoder : null,\n            filter,\n            sort,\n            allowDots,\n            serializeDate,\n            formatter,\n            encodeValuesOnly\n        ));\n    }\n\n    var joined = keys.join(delimiter);\n    var prefix = options.addQueryPrefix === true ? '?' : '';\n\n    return joined.length > 0 ? prefix + joined : '';\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty;\n\nvar hexTable = (function () {\n    var array = [];\n    for (var i = 0; i < 256; ++i) {\n        array.push('%' + ((i < 16 ? '0' : '') + i.toString(16)).toUpperCase());\n    }\n\n    return array;\n}());\n\nvar compactQueue = function compactQueue(queue) {\n    var obj;\n\n    while (queue.length) {\n        var item = queue.pop();\n        obj = item.obj[item.prop];\n\n        if (Array.isArray(obj)) {\n            var compacted = [];\n\n            for (var j = 0; j < obj.length; ++j) {\n                if (typeof obj[j] !== 'undefined') {\n                    compacted.push(obj[j]);\n                }\n            }\n\n            item.obj[item.prop] = compacted;\n        }\n    }\n\n    return obj;\n};\n\nvar arrayToObject = function arrayToObject(source, options) {\n    var obj = options && options.plainObjects ? Object.create(null) : {};\n    for (var i = 0; i < source.length; ++i) {\n        if (typeof source[i] !== 'undefined') {\n            obj[i] = source[i];\n        }\n    }\n\n    return obj;\n};\n\nvar merge = function merge(target, source, options) {\n    if (!source) {\n        return target;\n    }\n\n    if (typeof source !== 'object') {\n        if (Array.isArray(target)) {\n            target.push(source);\n        } else if (typeof target === 'object') {\n            if (options.plainObjects || options.allowPrototypes || !has.call(Object.prototype, source)) {\n                target[source] = true;\n            }\n        } else {\n            return [target, source];\n        }\n\n        return target;\n    }\n\n    if (typeof target !== 'object') {\n        return [target].concat(source);\n    }\n\n    var mergeTarget = target;\n    if (Array.isArray(target) && !Array.isArray(source)) {\n        mergeTarget = arrayToObject(target, options);\n    }\n\n    if (Array.isArray(target) && Array.isArray(source)) {\n        source.forEach(function (item, i) {\n            if (has.call(target, i)) {\n                if (target[i] && typeof target[i] === 'object') {\n                    target[i] = merge(target[i], item, options);\n                } else {\n                    target.push(item);\n                }\n            } else {\n                target[i] = item;\n            }\n        });\n        return target;\n    }\n\n    return Object.keys(source).reduce(function (acc, key) {\n        var value = source[key];\n\n        if (has.call(acc, key)) {\n            acc[key] = merge(acc[key], value, options);\n        } else {\n            acc[key] = value;\n        }\n        return acc;\n    }, mergeTarget);\n};\n\nvar assign = function assignSingleSource(target, source) {\n    return Object.keys(source).reduce(function (acc, key) {\n        acc[key] = source[key];\n        return acc;\n    }, target);\n};\n\nvar decode = function (str) {\n    try {\n        return decodeURIComponent(str.replace(/\\+/g, ' '));\n    } catch (e) {\n        return str;\n    }\n};\n\nvar encode = function encode(str) {\n    // This code was originally written by Brian White (mscdex) for the io.js core querystring library.\n    // It has been adapted here for stricter adherence to RFC 3986\n    if (str.length === 0) {\n        return str;\n    }\n\n    var string = typeof str === 'string' ? str : String(str);\n\n    var out = '';\n    for (var i = 0; i < string.length; ++i) {\n        var c = string.charCodeAt(i);\n\n        if (\n            c === 0x2D // -\n            || c === 0x2E // .\n            || c === 0x5F // _\n            || c === 0x7E // ~\n            || (c >= 0x30 && c <= 0x39) // 0-9\n            || (c >= 0x41 && c <= 0x5A) // a-z\n            || (c >= 0x61 && c <= 0x7A) // A-Z\n        ) {\n            out += string.charAt(i);\n            continue;\n        }\n\n        if (c < 0x80) {\n            out = out + hexTable[c];\n            continue;\n        }\n\n        if (c < 0x800) {\n            out = out + (hexTable[0xC0 | (c >> 6)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        if (c < 0xD800 || c >= 0xE000) {\n            out = out + (hexTable[0xE0 | (c >> 12)] + hexTable[0x80 | ((c >> 6) & 0x3F)] + hexTable[0x80 | (c & 0x3F)]);\n            continue;\n        }\n\n        i += 1;\n        c = 0x10000 + (((c & 0x3FF) << 10) | (string.charCodeAt(i) & 0x3FF));\n        out += hexTable[0xF0 | (c >> 18)]\n            + hexTable[0x80 | ((c >> 12) & 0x3F)]\n            + hexTable[0x80 | ((c >> 6) & 0x3F)]\n            + hexTable[0x80 | (c & 0x3F)];\n    }\n\n    return out;\n};\n\nvar compact = function compact(value) {\n    var queue = [{ obj: { o: value }, prop: 'o' }];\n    var refs = [];\n\n    for (var i = 0; i < queue.length; ++i) {\n        var item = queue[i];\n        var obj = item.obj[item.prop];\n\n        var keys = Object.keys(obj);\n        for (var j = 0; j < keys.length; ++j) {\n            var key = keys[j];\n            var val = obj[key];\n            if (typeof val === 'object' && val !== null && refs.indexOf(val) === -1) {\n                queue.push({ obj: obj, prop: key });\n                refs.push(val);\n            }\n        }\n    }\n\n    return compactQueue(queue);\n};\n\nvar isRegExp = function isRegExp(obj) {\n    return Object.prototype.toString.call(obj) === '[object RegExp]';\n};\n\nvar isBuffer = function isBuffer(obj) {\n    if (obj === null || typeof obj === 'undefined') {\n        return false;\n    }\n\n    return !!(obj.constructor && obj.constructor.isBuffer && obj.constructor.isBuffer(obj));\n};\n\nmodule.exports = {\n    arrayToObject: arrayToObject,\n    assign: assign,\n    compact: compact,\n    decode: decode,\n    encode: encode,\n    isBuffer: isBuffer,\n    isRegExp: isRegExp,\n    merge: merge\n};\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunctionPrototype[toStringTagSymbol] =\n    GeneratorFunction.displayName = \"GeneratorFunction\";\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      prototype[method] = function(arg) {\n        return this._invoke(method, arg);\n      };\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      if (!(toStringTagSymbol in genFun)) {\n        genFun[toStringTagSymbol] = \"GeneratorFunction\";\n      }\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return Promise.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return Promise.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new Promise(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList) {\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList)\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  Gp[toStringTagSymbol] = \"Generator\";\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n","/**\n * External dependencies.\n */\nimport serialize from 'form-serialize';\n\n/**\n * Internal dependencies.\n */\nimport { apiRequest } from '@wpsimplepay/utils';\n\n/**\n * Create a Customer object based on current formData.\n *\n * @param {Object} data Data to pass to REST endpoint.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n * @return {Promise} AJAX promise.\n */\nexport function create( data = {}, spFormElem, formData ) {\n\treturn apiRequest( 'v2/customer', {\n\t\tform_values: serialize( spFormElem[ 0 ], { hash: true } ),\n\t\tform_data: formData,\n\t\tform_id: formData.formId,\n\t\t...data,\n\t} );\n}\n","/**\n * Internal dependencies\n */\nimport LineItem from './line-item.js';\n\n/**\n * Cart\n */\nexport const Cart = class Cart {\n\t/**\n\t * Creates a cart.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @see `update()`\n\t *\n\t * @param {Object} args Cart arguments.\n\t * @return {Cart} Cart.\n\t */\n\tconstructor( args ) {\n\t\t// Set defaults.\n\t\t// @todo add support for classProperties.\n\t\tthis.items = [];\n\t\tthis.currency = 'usd';\n\t\tthis.taxPercent = 0;\n\t\tthis.coupon = false;\n\t\tthis.isNonDecimalCurrency = false;\n\n\t\tthis.update( args );\n\t}\n\n\t/**\n\t * Updates the cart.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @param {Object} args Cart arguments.\n\t * @param {number} args.taxPercent Tax percentage.\n\t * @param {false|Object} args.coupon Stripe Coupon.\n\t * @param {boolean} args.isNonDecimalCurrency If the currency is non-decimal based.\n\t * @return {Cart} Cart.\n\t */\n\tupdate( args ) {\n\t\t// Parse and retrieve specific arguments.\n\t\tconst {\n\t\t\tcurrency,\n\t\t\ttaxPercent,\n\t\t\tcoupon,\n\t\t\tisNonDecimalCurrency,\n\t\t} = {\n\t\t\t...this,\n\t\t\t...args,\n\t\t};\n\n\t\t// Set currency.\n\t\tif ( 'string' !== typeof currency ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-currency',\n\t\t\t\tmessage: 'Currency must be a string.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.currency = currency;\n\t\t}\n\n\t\t// Set fees.\n\t\tif ( isNaN( taxPercent ) ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-tax-percent',\n\t\t\t\tmessage: 'Tax percentage must be a number.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.taxPercent = parseFloat( taxPercent );\n\t\t}\n\n\t\t// Set coupon.\n\t\t// @todo Validate coupon data.\n\t\tif ( ! ( false === coupon || 'object' === typeof coupon ) ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-coupon',\n\t\t\t\tmessage: 'Coupon must be a false or contain coupon data.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.coupon = coupon;\n\t\t}\n\n\t\tif ( 'boolean' !== typeof isNonDecimalCurrency  ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-non-decimal-currency',\n\t\t\t\tmessage: 'Declaring a non-decimal currency must be a boolean.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.isNonDecimalCurrency = isNonDecimalCurrency;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Resets the cart.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {Cart} Cart.\n\t */\n\treset() {\n\t\treturn new Cart;\n\t}\n\n\t/**\n\t * Retrieves coupon information.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {Object} Stripe Coupon.\n\t */\n\tgetCoupon() {\n\t\treturn this.coupon;\n\t}\n\n\t/**\n\t * Retrieves the cart's tax percent amount.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number}\n\t */\n\tgetTaxPercent() {\n\t\treturn this.taxPercent;\n\t}\n\n\t/**\n\t * Retrieves the cart's tax decimal amount for calculations.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number}\n\t */\n\tgetTaxDecimal() {\n\t\treturn ( this.taxPercent / 100 );\n\t}\n\n\t/**\n\t * Retrieves the items in the cart.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {Array} List of cart items.\n\t */\n\tgetLineItems() {\n\t\treturn this.items;\n\t}\n\n\t/**\n\t * Retrieves an item.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @param {string} id Cart line item ID.\n\t * @return {LineItem} Cart line item.\n\t */\n\tgetLineItem( id ) {\n\t\tconst items = this.getLineItems();\n\n\t\t// Can't use `find` because it is not supported in IE.\n\t\tconst filteredItems = items.filter( ( { id: itemId } ) => ( itemId === id ) );\n\n\t\tif ( 0 === filteredItems.length ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-line-item',\n\t\t\t\tmessage: `Unable to retrieve line item \"${ id }\"`,\n\t\t\t};\n\t\t}\n\n\t\treturn filteredItems[ 0 ];\n\t}\n\n\t/**\n\t * Adds a line item to the cart.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @param {Object|LineItem} item Cart line item or arguments to create one.\n\t * @return {LineItem} Added line item.\n\t */\n\taddLineItem( item ) {\n\t\tlet lineitem;\n\n\t\tif ( true === item instanceof LineItem ) {\n\t\t\tlineitem = item;\n\t\t} else {\n\t\t\tlineitem = new this.LineItem( item, this );\n\t\t}\n\n\t\tthis.items.push( lineitem );\n\n\t\treturn lineitem;\n\t}\n};\n","export * from './cart.js';\nexport * from './line-item.js';\n\n/**\n * Converts current `formData` to a structured cart.\n *\n * @since 3.7.0\n *\n * @param {Object} formData Legacy form data.\n * @return {Object} data Cart data.\n */\nexport function convertFormDataToCartData( formData ) {\n\tconst {\n\t\tdebugLog,\n\t\tconvertToCents,\n\t} = window.spShared;\n\n\tconst {\n\t\tbooleans: {\n\t\t\tisZeroDecimal: isNonDecimalCurrency,\n\t\t},\n\t} = window.spGeneral;\n\n\tconst {\n\t\tstripeParams: {\n\t\t\tcurrency,\n\t\t},\n\n\t\t// Items.\n\t\tamount,\n\t\tisSubscription,\n\t\tquantity,\n\t\tisTrial,\n\t\tplanInterval,\n\t\tplanIntervalCount,\n\n\t\t// Fees.\n\t\tfeePercent,\n\t\tfeeAmount,\n\t\ttaxPercent,\n\t\tsetupFee,\n\t} = formData;\n\n\tconst data = {\n\t\tcurrency,\n\t\titems: [],\n\t\ttaxPercent: 0,\n\t\tisNonDecimalCurrency,\n\t};\n\n\t//\n\t// Add items.\n\t//\n\n\t// Initial Setup Fee.\n\tif ( ! isNaN( setupFee ) ) {\n\t\tdata.items.push( {\n\t\t\tid: 'setup-fee',\n\t\t\ttitle: 'Initial Setup Fee',\n\t\t\tamount: convertToCents( setupFee ),\n\t\t\tquantity: 1,\n\t\t\tsubscription: false,\n\t\t} );\n\t}\n\n\t// Plan Setup Fee.\n\tdata.items.push( {\n\t\tid: 'plan-setup-fee',\n\t\ttitle: 'Plan Setup Fee',\n\t\tamount: 0,\n\t\tquantity: 1,\n\t\tsubscription: false,\n\t} );\n\n\t// Base item.\n\tif ( isSubscription ) {\n\t\tdata.items.push( {\n\t\t\tid: 'base',\n\t\t\ttitle: 'Subscription',\n\t\t\tamount: convertToCents( amount ),\n\t\t\tquantity,\n\t\t\tsubscription: {\n\t\t\t\tisTrial,\n\t\t\t\tinterval: planInterval,\n\t\t\t\tintervalCount: planIntervalCount,\n\t\t\t},\n\t\t} );\n\t} else {\n\t\tlet singleAmount = amount;\n\n\t\tif ( ! isNaN( feeAmount ) && feeAmount > 0 ) {\n\t\t\tsingleAmount += feeAmount;\n\n\t\t\tdebugLog( 'feeAmount:', 'Arbitrary fee amounts should be added to the base amount directly.' );\n\t\t}\n\n\t\tdata.items.push( {\n\t\t\tid: 'base',\n\t\t\ttitle: 'One-time amount',\n\t\t\tamount: convertToCents( singleAmount ),\n\t\t\tquantity,\n\t\t\tsubscription: false,\n\t\t} );\n\t}\n\n\t// Tax.\n\tif ( ! isNaN( taxPercent ) ) {\n\t\tdata.taxPercent = taxPercent;\n\t}\n\n\t// Add any arbitrary fee percentage to tax percentage.\n\t// @link https://github.com/wpsimplepay/wp-simple-pay-pro/issues/1161\n\tif ( ! isNaN( feePercent ) && feePercent > 0 ) {\n\t\tdata.taxPercent = data.taxPercent + feePercent;\n\t\tdebugLog( 'feePercent:', 'Arbitrary fee percentages should be added to the taxPercent directly.' );\n\t};\n\n\treturn data;\n}\n","/**\n * Internal dependencies\n */\nimport { Cart } from './cart.js';\n\n/**\n * LineItem\n */\nexport const LineItem = class LineItem {\n\t/**\n\t * Create a line item.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @param {Object} args Line item arguments.\n\t * @param {string} args.id Cart line item ID.\n\t * @param {string} args.title Cart line item title.\n\t * @param {number} args.amount Cart line item amount.\n\t * @param {number} args.quantity Cart line item quantity.\n\t * @param {boolean|Object} args.subscription Cart line item subscription data.\n\t * @param {boolean} args.subscription.isTrial Cart line item subscription trial designation.\n\t * @param {number} args.subscription.intervalCount Cart line item subscription interval count.\n\t * @param {number} args.subscription.interval Cart line item subscription interval.\n\t * @param {Cart} cart Cart this line item is attached to.\n\t * @return {LineItem} LineItem\n\t */\n\tconstructor( args, cart ) {\n\t\t// Set defaults.\n\t\t// @todo add support for classProperties.\n\t\tthis.cart = null;\n\t\tthis.id = null;\n\t\tthis.title = null;\n\t\tthis.amount = 0;\n\t\tthis.quantity = 1;\n\t\tthis.subscription = false;\n\n\t\tif ( 'object' !== typeof cart ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-line-item-cart',\n\t\t\t\tmessage: 'Item must have an cart.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.cart = cart;\n\t\t}\n\n\t\tthis.update( args );\n\t}\n\n\t/**\n\t * Updates a line item.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @param {Object} args Cart line item arguments.\n\t * @param {string} args.id Cart line item ID.\n\t * @param {string} args.title Cart line item title.\n\t * @param {number} args.amount Cart line item amount.\n\t * @param {number} args.quantity Cart line item quantity.\n\t * @param {boolean|Object} args.subscription Cart line item subscription data.\n\t * @param {boolean} args.subscription.isTrial Cart line item subscription trial designation.\n\t * @param {number} args.subscription.intervalCount Cart line item subscription interval count.\n\t * @param {number} args.subscription.interval Cart line item subscription interval.\n\t * @return {LineItem} Line item.\n\t */\n\tupdate( args ) {\n\t\t// Parse and retrieve specific arguments.\n\t\tconst {\n\t\t\tid,\n\t\t\ttitle,\n\t\t\tamount,\n\t\t\tquantity,\n\t\t\tsubscription,\n\t\t} = {\n\t\t\t...this,\n\t\t\t...args,\n\t\t};\n\n\t\t// ID must be a string.\n\t\tif ( 'string' !== typeof id ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-line-item-id',\n\t\t\t\tmessage: 'Item ID must be a string.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.id = id;\n\t\t}\n\n\t\t// Title must be a string.\n\t\t// Not currently shown in any UI, but may be in the future.\n\t\tif ( 'string' !== typeof title ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-line-item-title',\n\t\t\t\tmessage: 'Item title must be a string.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.title = title;\n\t\t}\n\n\t\t// Amount must be a number.\n\t\tif ( ! Number.isSafeInteger( amount ) ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-line-item-amount',\n\t\t\t\tmessage: 'Item amount must be an integer.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.amount = amount;\n\t\t}\n\n\t\t// Quantity must be a number.\n\t\tif ( ! Number.isSafeInteger( quantity ) ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-line-item-quantity',\n\t\t\t\tmessage: 'Item quantity must be an integer.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.quantity = quantity;\n\t\t}\n\n\t\t// Subscription must be false or contain subscription data.\n\t\t// @todo Validate subscription data.\n\t\tif ( ! ( false === subscription || 'object' === typeof subscription ) ) {\n\t\t\tthrow {\n\t\t\t\tid: 'invalid-line-item-subscription',\n\t\t\t\tmessage: 'Item subscription data must be a false or contain subscription data.',\n\t\t\t};\n\t\t} else {\n\t\t\tthis.subscription = subscription;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes the line item from the cart.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {LineItem} Removed line item.\n\t */\n\tremove() {\n\t\tconst allItems = this.cart.getLineItems();\n\t\tconst remainingItems = allItems.filter( ( { id } ) => ( this.id !== id ) );\n\n\t\tthis.cart.items = remainingItems;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Retrieves a cart line item's unit price.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number} Cart line item unit price.\n\t */\n\tgetUnitPrice() {\n\t\treturn this.amount;\n\t}\n\n\t/**\n\t * Retrieves the cart line item's quantity.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number} Cart line item quantity.\n\t */\n\tgetQuantity() {\n\t\treturn this.quantity;\n\t}\n\t\n\t/**\n\t * Retrieves a cart line item's tax.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number} Cart line item tax.\n\t */\n\tgetTax() {\n\t\tlet tax = 0;\n\t\tlet i = 0;\n\n\t\tconst taxDecimal = this.cart.getTaxDecimal();\n\t\tconst quantity = this.getQuantity();\n\t\tconst subtotal = this.getSubtotal();\n\n\t\tfor ( i = 0; i < quantity; i++ ) {\n\t\t\ttax += Math.round( subtotal * taxDecimal );\n\t\t}\n\n\t\treturn tax;\n\t}\n};\n\nexport default LineItem;\n","/* global jQuery, wpApiSettings */\n\n/**\n * Make an API request to the REST API.\n *\n * @param {string} route REST route.\n * @param {Object} data Data to send to the request.\n * @return {Promise} jQuery promise.\n */\nexport function apiRequest( route, data ) {\n\treturn jQuery.ajax( {\n\t\tdata,\n\t\tmethod: 'POST',\n\t\turl: `${ wpApiSettings.root }wpsp/${ route }`,\n\t\tbeforeSend: ( xhr ) => {\n\t\t\txhr.setRequestHeader( 'X-WP-Nonce', wpApiSettings.nonce );\n\t\t},\n\t} );\n}\n","export * from './number.js';\nexport * from './api-request.js';\n","// @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isInteger#Polyfill\nNumber.isInteger = Number.isInteger || function( value ) {\n\treturn typeof value === 'number' &&\n\t\tisFinite( value ) &&\n\t\tMath.floor( value ) === value;\n};\n\n// @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/isSafeInteger#Polyfill\nNumber.isSafeInteger = Number.isSafeInteger || function( value ) {\n\treturn Number.isInteger( value ) && Math.abs( value ) <= Number.MAX_SAFE_INTEGER;\n};\n\n// @link https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Number/MAX_SAFE_INTEGER#Polyfill\nif ( ! Number.MAX_SAFE_INTEGER ) {\n\tNumber.MAX_SAFE_INTEGER = 9007199254740991; // Math.pow(2, 53) - 1;\n}\n","/* global jQuery */\n\n/**\n * Internal dependencies.\n */\nimport { convertFormDataToCartData } from '@wpsimplepay/cart';\nimport {\n\tCart,\n\n\thandle as handleCardPaymentMethod,\n\tsetup as setupCardPaymentMethod,\n\tcreate as createCardPaymentMethod,\n} from '@wpsimplepay/pro/frontend/payment-methods/card';\n\n\nconst ELEMENTS_DEFAULT_STYLE = {\n\tbase: {\n\t\tcolor: '#32325d',\n\t\tfontFamily: 'Roboto, Open Sans, Segoe UI, sans-serif',\n\t\tfontSize: '15px',\n\t\tfontSmoothing: 'antialiased',\n\t\tfontWeight: 500,\n\n\t\t'::placeholder': {\n\t\t\tcolor: '#aab7c4'\n\t\t}\n\t},\n\tinvalid: {\n\t\tcolor: '#fa755a',\n\t\ticonColor: '#fa755a'\n\t}\n};\n\n/**\n * Gets Element styles based on an existing form input.\n *\n * Injects supplementary styles for the wrapper element.\n *\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param cardEl\n * @return {Object} Element style information.\n */\nfunction getElementsStyle( spFormElem, cardEl ) {\n\t// Do nothing if an Element has already been styled;\n\tif ( document.getElementById( 'simpay-stripe-element-styles' ) ) {\n\t\treturn ELEMENTS_DEFAULT_STYLE;\n\t}\n\n\t// Inject inline CSS instead of applying to the Element so it can be overwritten.\n\tconst styleTag = document.createElement( 'style' );\n\tstyleTag.id = 'simpay-stripe-element-styles';\n\n\t// Try to mimick existing input styles.\n\tlet input;\n\n\tinput = document.querySelector( 'input.simpay-email' );\n\n\t// Try one more input in the main page content.\n\tif ( ! input ) {\n\t\tinput = document.querySelector( 'body [role=\"main\"] input:not([type=\"hidden\"])' );\n\t}\n\n\t// Use default styles if no other input exists.\n\tif ( ! input ) {\n\t\tstyleTag.innerHTML = `.StripeElement.simpay-card-wrap {\n\t\t\tbackground: #fff;\n\t\t\tborder: 1px solid #d1d1d1;\n\t\t\tborder-radius: 4px;\n\t\t\tpadding: 0.4375em;\n\t\t\theight: 36px;\n\t\t\tmin-height: 36px;\n\t\t}`;\n\n\t\tdocument.body.appendChild( styleTag );\n\n\t\treturn ELEMENTS_DEFAULT_STYLE;\n\t} else {\n\t\tconst inputStyles = window.getComputedStyle( input );\n\t\tconst placeholderStyles = window.getComputedStyle( input, '::placeholder' );\n\n\t\tconst trbl = [ 'top', 'right', 'bottom', 'left' ].map( ( dir ) => (\n\t\t\t`border-${ dir }-color: ${ inputStyles.getPropertyValue( `border-${ dir }-color` ) };\n\t\t\tborder-${ dir }-width: ${ inputStyles.getPropertyValue( `border-${ dir }-width` ) };\n\t\t\tborder-${ dir }-style: ${ inputStyles.getPropertyValue( `border-${ dir }-style` ) };\n\t\t\tpadding-${ dir }: ${ inputStyles.getPropertyValue( `padding-${ dir }` ) };`\n\t\t) );\n\n\t\tconst corners = [ 'top-right', 'bottom-right', 'bottom-left', 'top-left' ].map( ( corner ) => (\n\t\t\t`border-${ corner }-radius: ${ inputStyles.getPropertyValue( `border-${ corner }-radius` ) };`\n\t\t) );\n\n\t\t// Generate longhand properties.\n\t\tstyleTag.innerHTML = `.StripeElement.simpay-card-wrap {\n\t\t\tbackground-color: ${ inputStyles.getPropertyValue( 'background-color' ) };\n\t\t\t${ trbl.join( '' ) }\n\t\t\t${ corners.join( '' ) }\n\t\t}`;\n\n\t\tdocument.body.appendChild( styleTag );\n\n\t\treturn {\n\t\t\tbase: {\n\t\t\t\tcolor: inputStyles.getPropertyValue( 'color' ),\n\t\t\t\tfontFamily: inputStyles.getPropertyValue( 'font-family' ),\n\t\t\t\tfontSize: inputStyles.getPropertyValue( 'font-size' ),\n\t\t\t\tfontWeight: inputStyles.getPropertyValue( 'font-weight' ),\n\t\t\t\tfontSmoothing: inputStyles.getPropertyValue( '-webkit-font-smoothing' ),\n\t\t\t\t// This can't be fetched dynamically, unfortunately.\n\t\t\t\t'::placeholder': {\n\t\t\t\t\tcolor: '#c7c7c7',\n\t\t\t\t},\n\t\t\t},\n\t\t};\n\t}\n}\n\n/**\n * Get Card Element configuration.\n *\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param cardEl\n * @param {Object} formData Configured form data.\n * @return {Object}\n */\nexport function getElementsConfig( spFormElem, cardEl ) {\n\t// If a billing address field exists (overrides Card field setting).\n\tconst hidePostalCode = (\n\t\t!! spFormElem[ 0 ].querySelector( '.simpay-address-zip' ) ||\n\t\t'no' === cardEl.dataset.showPostalCode\n\t);\n\n\tconst style = getElementsStyle( spFormElem, cardEl );\n\n\treturn {\n\t\thidePostalCode,\n\t\tstyle,\n\t};\n}\n\n/**\n * Handles an error on Submission.\n *\n * @since 3.7.0\n *\n * @param {Object} error Error data.\n * @param {jquery} spformelem form element jquery object.\n * @param {object} formdata configured form data.\n */\nfunction onError( error, spFormElem, formData ) {\n\t// @todo DRY with other form handling.\n\tif ( ! _.isObject( error ) ) {\n\t\treturn;\n\t}\n\n\tconst {\n\t\tresponseJSON,\n\t\tresponseText,\n\t\tmessage,\n\t} = error;\n\n\tconst foundMessage = ( responseJSON && responseJSON.message ? responseJSON.message : responseText );\n\tconst errorMessage = message ? message : foundMessage;\n\n\tconst {\n\t\tshowError,\n\t\tenableForm,\n\t} = window.simpayApp;\n\n\tconst {\n\t\tdebugLog,\n\t} = window.spShared;\n\n\tshowError( spFormElem, formData, errorMessage );\n\tenableForm( spFormElem, formData );\n\n\tdebugLog( 'Payment Form Error:', error );\n}\n\n/**\n * Submit payment form.\n *\n * @param {Event} e Form submit Event.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nfunction onSubmit( e, spFormElem, formData ) {\n\te.preventDefault();\n\n\t// Remove existing errors.\n\twindow.simpayApp.showError( spFormElem, formData, '' );\n\n\t// Disable form while processing.\n\twindow.simpayApp.disableForm( spFormElem, formData, true );\n\n\t// HTML5 validation check.\n\tif ( ! spFormElem[ 0 ].checkValidity() ) {\n\t\twindow.simpayApp.triggerBrowserValidation( spFormElem, formData );\n\t\twindow.simpayApp.enableForm( spFormElem, formData );\n\n\t\treturn;\n\t}\n\n\t// Allow further validation.\n\t//\n\t// jQuery( document.body ).on( 'simpayBeforeStripePayment', function( e, spFormElem, formData ) {\n\t//  formData.isValid = false;\n\t// } );\n\tspFormElem.trigger( 'simpayBeforeStripePayment', [ spFormElem, formData ] );\n\n\tif ( ! formData.isValid ) {\n\t\twindow.simpayApp.enableForm( spFormElem, formData );\n\n\t\treturn;\n\t}\n\n\ttry {\n\t\tcreateCardPaymentMethod( spFormElem, formData )\n\t\t\t.then( ( result ) => handleCardPaymentMethod( result, spFormElem, formData ) )\n\t\t\t.catch( ( error ) => onError( error, spFormElem, formData ) );\n\t} catch ( error ) {\n\t\tonError( error, spFormElem, formData );\n\t}\n}\n\n/**\n * Bind events for Stripe Elements.\n *\n * @param {Event} e simpayBindCoreFormEventsAndTriggers Event.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nexport function setup( e, spFormElem, formData ) {\n\tconst {\n\t\tisStripeCheckoutForm,\n\t\tdisableForm,\n\t} = window.simpayApp;\n\n\tconst {\n\t\tdebugLog,\n\t} = window.spShared;\n\n\t// Don't continue if this form is using Stripe Checkout.\n\tif ( isStripeCheckoutForm( formData ) ) {\n\t\treturn;\n\t}\n\n\tdisableForm( spFormElem, formData, true );\n\n\t// Cache form elements.\n\tconst realFormElem = spFormElem[ 0 ];\n\tconst submitBtn = realFormElem.querySelector( '.simpay-checkout-btn' );\n\n\tif ( ! submitBtn ) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\t// Create a cart.\n\n\t\t// Convert legacay data in to something usable.\n\t\tconst {\n\t\t\titems,\n\t\t\tcurrency,\n\t\t\ttaxPercent,\n\t\t\tisNonDecimalCurrency,\n\t\t} = convertFormDataToCartData( formData );\n\n\t\tconst cart = new Cart( {\n\t\t\tcurrency,\n\t\t\ttaxPercent,\n\t\t\tisNonDecimalCurrency,\n\t\t} );\n\n\t\tif ( items.length > 0 ) {\n\t\t\titems.forEach( ( item ) => {\n\t\t\t\tcart.addLineItem( item );\n\t\t\t} );\n\t\t}\n\n\t\t// Attach cart.\n\t\tspFormElem.cart = cart;\n\n\t\t// Initilize \"card\" field.\n\t\t// Enables form.\n\t\t// @todo This should be called automatically when a \"Card\" field type is used.\n\t\tsetupCardPaymentMethod( spFormElem, formData );\n\n\t\t// Handle form submission.\n\t\trealFormElem.addEventListener( 'submit', ( e ) => onSubmit( e, spFormElem, formData ) );\n\t} catch ( error ) {\n\t\tdebugLog( error.id, error.message );\n\t}\n}\n","/**\n * Internal dependencies\n */\nimport { Cart as BaseCart } from '@wpsimplepay/cart';\nimport LineItem from './line-item.js';\n\n/**\n * Cart for Embedded/Overlay form types.\n *\n * @todo Move to /pro\n *\n * @since 3.7.0\n */\nexport const Cart = class Cart extends BaseCart {\n\t/**\n\t * @since 3.7.0\n\t *\n\t * @param {Object} args Cart arguments.\n\t */\n\tconstructor( args ) {\n\t\tsuper( args );\n\n\t\t// Define the type of line item to use.\n\t\tthis.LineItem = LineItem;\n\t}\n\n\t/**\n\t * Retrieves subtotal.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number} Cart subtotal.\n\t */\n\tgetSubtotal() {\n\t\tlet subtotal = 0;\n\n\t\tthis.getLineItems().forEach( ( item ) => {\n\t\t\tsubtotal += item.getSubtotal();\n\t\t} );\n\n\t\treturn subtotal;\n\t}\n\n\t/**\n\t * Retrieves the total discount amount.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number} Cart discount amount.\n\t */\n\tgetDiscount() {\n\t\tconst coupon = this.getCoupon();\n\t\tlet discount = 0;\n\n\t\tif ( false === coupon ) {\n\t\t\treturn discount;\n\t\t}\n\n\t\tconst {\n\t\t\tamount_off: amountOff,\n\t\t\tpercent_off: percentOff,\n\t\t} = coupon;\n\n\t\tif ( percentOff ) {\n\t\t\tthis.getLineItems().forEach( ( item ) => {\n\t\t\t\tdiscount += Math.round( item.getSubtotal() * ( percentOff / 100 ) );\n\t\t\t} );\n\t\t}\n\n\t\tif ( amountOff ) {\n\t\t\tdiscount += amountOff;\n\t\t}\n\n\t\treturn discount;\n\t}\n\n\t/**\n\t * Retrieves total tax amount.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number} Cart tax.\n\t */\n\tgetTax() {\n\t\tlet tax = 0;\n\n\t\tconst coupon = this.getCoupon();\n\t\tconst taxDecimal = this.getTaxDecimal();\n\t\tconst lineItems = this.getLineItems();\n\n\t\t// Calculate taxes with no coupon applied.\n\t\tif ( false === coupon ) {\n\t\t\tlineItems.forEach( ( item ) => {\n\t\t\t\ttax += Math.round( item.getSubtotal() * taxDecimal );\n\t\t\t} );\n\n\t\t\treturn tax;\n\t\t}\n\n\t\tconst {\n\t\t\tpercent_off: percentOff,\n\t\t\tamount_off: amountOff,\n\t\t} = coupon;\n\n\t\t// Calculate taxes with a %-based coupon applied.\n\t\t//\n\t\t// Stripe applies the discount percent to each line item before\n\t\t// calculating the tax amount of each and summing.\n\t\tif ( percentOff ) {\n\t\t\tlineItems.forEach( ( item ) => {\n\t\t\t\tconst lineItemDiscount = item.getSubtotal() * ( percentOff / 100 );\n\t\t\t\tconst lineItemSubtotal = item.getSubtotal() - lineItemDiscount;\n\n\t\t\t\ttax += Math.round( lineItemSubtotal * taxDecimal );\n\t\t\t} );\n\n\t\t\treturn tax;\n\t\t}\n\n\t\tconst subtotal = this.getSubtotal();\n\n\t\t// Calculate taxes with a fixed-amount coupon applied.\n\t\t//\n\t\t// Stripe applies the discount amount to the cart subtotal before\n\t\t// calculating the tax amount for the whole cart.\n\t\tif ( amountOff ) {\n\t\t\tconst cartSubtotal = subtotal - amountOff;\n\n\t\t\ttax += Math.round( cartSubtotal * taxDecimal );\n\n\t\t\treturn tax;\n\t\t}\n\t}\n\n\t/**\n\t * Retrieves the total.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number} Cart total.\n\t */\n\tgetTotal() {\n\t\tconst subtotal = this.getSubtotal();\n\t\tconst tax = this.getTax();\n\t\tconst discount = this.getDiscount();\n\n\t\treturn Math.round( ( subtotal - discount ) + tax );\n\t}\n};\n","/**\n * Internal dependencies\n */\nimport { LineItem as BaseLineItem } from '@wpsimplepay/cart';\n\n/**\n * LineItem\n */\nclass LineItem extends BaseLineItem {\n\t/**\n\t * Retrieves a cart line item's subtotal.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number} Cart line item subtotal.\n\t */\n\tgetSubtotal() {\n\t\treturn Math.round( this.getUnitPrice() * this.getQuantity() );\n\t}\n\n\t/**\n\t * Retrieves a cart line item's total.\n\t *\n\t * @since 3.7.0\n\t *\n\t * @return {number} Cart line item total.\n\t */\n\tgetTotal() {\n\t\treturn Math.round( this.getSubtotal() + this.getTax() );\n\t}\n}\n\nexport default LineItem;\n","/**\n * WordPress dependencies.\n */\nimport { addQueryArgs } from '@wordpress/url';\n\n/**\n * Internal dependencies.\n */\nimport {\n\tcreate as createCustomer,\n} from '@wpsimplepay/core/frontend/payments/customer.js';\n\nimport {\n\tcreate as createPaymentIntent,\n\thandleServerResponse as handlePaymentIntentServerResponse,\n} from '@wpsimplepay/pro/frontend/payments/paymentintent.js';\n\nimport {\n\tcreate as createSubscription,\n\thandleServerResponse as handleSubscriptionServerResponse,\n} from '@wpsimplepay/pro/frontend/payments/subscription.js';\n\nimport {\n\tgetElementsConfig,\n} from '@wpsimplepay/pro/frontend/payment-forms/stripe-elements';\n\nexport * from './cart';\n\n/**\n * Handle a Stripe Payment method.\n *\n * Depending on the form type, follow one of two flows:\n *\n * 1. https://stripe.com/docs/billing/subscriptions/payment\n * 2. https://stripe.com/docs/payments/payment-intents/quickstart#manual-confirmation-flow\n *\n * @param {Object} result Stripe createSource result.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nexport async function handle( result, spFormElem, formData ) {\n\tif ( result.error ) {\n\t\tthrow result.error;\n\t}\n\n\t// Customer is required for both flows.\n\tconst customer = await createCustomer(\n\t\t{\n\t\t\tsource_id: result.source.id,\n\t\t},\n\t\tspFormElem,\n\t\tformData\n\t);\n\n\tconst successUrl = addQueryArgs( formData.stripeParams.success_url, {\n\t\tcustomer_id: customer.id,\n\t} );\n\n\tlet paymentIntentRequiresAction;\n\n\tif ( formData.isSubscription || formData.isRecurring ) {\n\t\tconst subscription = await createSubscription(\n\t\t\t{\n\t\t\t\tcustomer_id: customer.id,\n\t\t\t},\n\t\t\tspFormElem,\n\t\t\tformData\n\t\t);\n\n\t\t// Handle next actions on Subscription's PaymentIntent.\n\t\tpaymentIntentRequiresAction = await handleSubscriptionServerResponse( subscription, spFormElem, formData );\n\t} else {\n\t\tconst paymentIntent = await createPaymentIntent(\n\t\t\t{\n\t\t\t\tcustomer_id: customer.id,\n\t\t\t\tpayment_method_id: result.source.id,\n\t\t\t},\n\t\t\tspFormElem,\n\t\t\tformData\n\t\t);\n\n\t\t// No SCA needed, redirect.\n\t\tif ( ! paymentIntent.requires_action ) {\n\t\t\treturn window.location.href = successUrl;\n\t\t}\n\n\t\t// Handle next actions on PaymentIntent.\n\t\tpaymentIntentRequiresAction = await handlePaymentIntentServerResponse(\n\t\t\t{\n\t\t\t\tcustomer_id: customer.id,\n\t\t\t\tpayment_intent: paymentIntent,\n\t\t\t},\n\t\t\tspFormElem,\n\t\t\tformData\n\t\t);\n\t}\n\n\t// Nothing else is needed, redirect.\n\tif ( false === paymentIntentRequiresAction ) {\n\t\treturn window.location.href = successUrl;\n\t}\n}\n\n/**\n * Sets up a Stripe Elements Card field and binds events.\n *\n * @link https://stripe.com/docs/stripe-js/reference#elements-create\n *\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nexport function setup( spFormElem, formData ) {\n\tconst elements = spFormElem.stripeInstance.elements();\n\tconst cardEl = spFormElem[ 0 ].querySelector( '.simpay-card-wrap' );\n\n\tif ( ! cardEl ) {\n\t\treturn;\n\t}\n\n\t// Create Element Card instance.\n\tspFormElem.cardElementInstance = elements.create(\n\t\t'card',\n\t\tgetElementsConfig( spFormElem, cardEl )\n\t);\n\n\t// Mount and setup Element card instance.\n\tspFormElem.cardElementInstance.mount( cardEl );\n\n\t// Enable form when Card field is ready.\n\tspFormElem.cardElementInstance.on( 'ready', () => window.simpayApp.enableForm( spFormElem, formData ) );\n\n\t// Live feedback when card updates.\n\tspFormElem.cardElementInstance.on( 'change', ( result ) => {\n\t\twindow.simpayApp.enableForm( spFormElem, formData );\n\n\t\tif ( result.error ) {\n\t\t\twindow.simpayApp.showError( spFormElem, formData, result.error.message );\n\t\t} else {\n\t\t\twindow.simpayApp.showError( spFormElem, formData, '' );\n\t\t}\n\t} );\n}\n\n/**\n * Creates a Card Source.\n *\n * @todo Switch to a true PaymentMethod.\n *       Stripe currently converts these behind the scenes.\n *       https://stripe.com/docs/stripe-js/reference#stripe-create-payment-method\n *\n * @link https://stripe.com/docs/stripe-js/reference#stripe-create-source\n *\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n * @return {Promise}\n */\nexport function create( spFormElem, formData ) {\n\tconst {\n\t\tcurrency,\n\t} = formData;\n\n\tconst owner = getOwnerData( spFormElem, formData );\n\n\treturn spFormElem.stripeInstance\n\t\t.createSource(\n\t\t\tspFormElem.cardElementInstance,\n\t\t\t{\n\t\t\t\ttype: 'card',\n\t\t\t\tcurrency,\n\t\t\t\towner,\n\t\t\t}\n\t\t);\n}\n\n/**\n * Handles a Card Payment Method creation error.\n *\n * @param {Object} error Error object from Promise or general throw.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nexport function onError( error, spFormElem, formData ) {\n\t// @todo DRY with other form handling.\n\tif ( ! _.isObject( error ) ) {\n\t\treturn;\n\t}\n\n\tconst {\n\t\tresponseJSON,\n\t\tresponseText,\n\t\tmessage,\n\t} = error;\n\n\tconst foundMessage = ( responseJSON && responseJSON.message ? responseJSON.message : responseText );\n\tconst errorMessage = message ? message : foundMessage;\n\n\tconst {\n\t\tshowError,\n\t\tenableForm,\n\t} = window.simpayApp;\n\n\tconst {\n\t\tdebugLog,\n\t} = window.spShared;\n\n\tshowError( spFormElem, formData, errorMessage );\n\tenableForm( spFormElem, formData );\n\n\tdebugLog( 'Payment Form Error:', error );\n}\n\n/**\n * Find card owner data in the form.\n *\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nexport function getOwnerData( spFormElem, formData ) {\n\tconst billingAddressContainer = spFormElem.find( '.simpay-billing-address-container' );\n\n\tconst name = spFormElem.find( '.simpay-customer-name' ).val() || null;\n\tconst email = spFormElem.find( '.simpay-email' ).val() || null;\n\tconst phone = spFormElem.find( '.simpay-telephone' ).val() || null;\n\tconst address = 0 !== billingAddressContainer.length ? {\n\t\tline1: billingAddressContainer.find( '.simpay-address-street' ).val() || null,\n\t\tcity: billingAddressContainer.find( '.simpay-address-city' ).val() || null,\n\t\tstate: billingAddressContainer.find( '.simpay-address-state' ).val() || null,\n\t\tpostal_code: billingAddressContainer.find( '.simpay-address-zip' ).val() || null,\n\t\tcountry: billingAddressContainer.find( '.simpay-address-country' ).val() || null,\n\t} : null;\n\n\treturn {\n\t\tname,\n\t\temail,\n\t\tphone,\n\t\taddress,\n\t};\n}\n","/* global wpApiSettings */\n\n/**\n * External dependencies.\n */\nimport serialize from 'form-serialize';\n\n/**\n * Internal dependencies.\n */\nimport { apiRequest } from '@wpsimplepay/utils';\n\n/**\n * Create a Stripe\\PaymentIntent object based on current formData.\n *\n * @param {Object} data Data to pass to REST endpoint.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n * @return {Promise} AJAX promise.\n */\nexport function create( data, spFormElem, formData ) {\n\treturn apiRequest( 'v2/paymentintent/create', {\n\t\tform_values: serialize( spFormElem[ 0 ], { hash: true } ),\n\t\tform_data: formData,\n\t\tform_id: formData.formId,\n\t\t...data,\n\t} );\n}\n\n/**\n * Verify a PaymentIntent after any required actions.\n *\n * @param {Object} data Data to pass to REST endpoint.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n * @return {Promise} AJAX promise.\n */\nexport function confirm( data = {}, spFormElem, formData ) {\n\treturn apiRequest( 'v2/paymentintent/confirm', {\n\t\tform_values: serialize( spFormElem[ 0 ], { hash: true } ),\n\t\tform_data: formData,\n\t\tform_id: formData.formId,\n\t\t...data,\n\t} );\n}\n\n/**\n * Handle server response/next actions for a PaymentIntent.\n *\n * @param {Object} response Server response object.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nexport function handleServerResponse( data, spFormElem, formData ) {\n\tconst {\n\t\tpayment_intent: paymentIntent,\n\t\tcustomer_id,\n\t} = data;\n\n\tif ( ! paymentIntent.requires_action ) {\n\t\treturn false;\n\t}\n\n\t// Handle a PaymentIntent that requires action.\n\treturn spFormElem.stripeInstance\n\t\t.handleCardAction( paymentIntent.payment_intent_client_secret )\n\t\t.then( async ( result ) => {\n\t\t\tconst { error, paymentIntent: paymentIntentAction } = result;\n\n\t\t\tif ( error ) {\n\t\t\t\tthrow error;\n\t\t\t}\n\n\t\t\tconst paymentIntentConfirmation = await confirm(\n\t\t\t\t{\n\t\t\t\t\tpayment_intent_id: paymentIntentAction.id,\n\t\t\t\t\tcustomer_id,\n\t\t\t\t},\n\t\t\t\tspFormElem,\n\t\t\t\tformData\n\t\t\t);\n\n\t\t\treturn handleServerResponse(\n\t\t\t\t{\n\t\t\t\t\tpayment_intent: paymentIntentConfirmation,\n\t\t\t\t\tcustomer_id,\n\t\t\t\t},\n\t\t\t\tspFormElem,\n\t\t\t\tformData\n\t\t\t);\n\t\t} );\n}\n","/* global wpApiSettings */\n\n/**\n * External dependencies.\n */\nimport serialize from 'form-serialize';\n\n/**\n * Internal dependencies.\n */\nimport { apiRequest } from '@wpsimplepay/utils';\n\n/**\n * Create a Subscription object based on current formData.\n *\n * @param {Object} data Data to pass to REST endpoint.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n * @return {Promise} AJAX promise.\n */\nexport function create( data = {}, spFormElem, formData ) {\n\treturn apiRequest( 'v2/subscription', {\n\t\tform_values: serialize( spFormElem[ 0 ], { hash: true } ),\n\t\tform_data: formData,\n\t\tform_id: formData.formId,\n\t\t...data,\n\t} );\n}\n\n/**\n * Update a Subscription's payment method.\n *\n * Requires a Subscription's key and linked Customer for verification.\n * Takes direct arguments vs. spFormElem and full form data.\n *\n * @param {string} subscription_id ID of the Subscription.\n * @param {Object} form_values {\n *\n *   @type {string} nonce Form nonce.\n *   @type {string} subscription_key Subscription secret key.\n *   @type {string} source_id ID of the Source.\n *   @type {string} customer_id ID of the Customer.\n * }\n * @return {Promise} AJAX promise.\n */\nexport function updatePaymentMethod( subscription_id, args ) {\n\tconst {\n\t\tcustomer_id,\n\t} = args;\n\n\treturn apiRequest( `v2/subscription/payment_method/${ subscription_id }/${ customer_id }`, {\n\t\tform_values: args,\n\t} );\n}\n\n/**\n * Handle server response/next actions for a PaymentIntent.\n *\n * Use the Subscription's invoice to determine if action needs ot be taken.\n *\n * @param {Object} subscription \\Stripe\\Subscription.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nexport function handleServerResponse( subscription, spFormElem, formData ) {\n\tconst {\n\t\tstatus,\n\t\tlatest_invoice: {\n\t\t\tpayment_intent: paymentIntent,\n\t\t},\n\t\tpending_setup_intent: setupIntent,\n\t} = subscription;\n\n\tconst {\n\t\tstripeParams: {\n\t\t\tsuccess_url: successUrl,\n\t\t\terror_url: errorUrl,\n\t\t},\n\t} = formData;\n\n\tif ( ! ( paymentIntent || setupIntent ) ) {\n\t\treturn false;\n\t}\n\n\t// Initial charge is required.\n\tif ( paymentIntent ) {\n\t\tconst {\n\t\t\tstatus: paymentIntentStatus,\n\t\t\tclient_secret: paymentIntentClientSecret,\n\t\t\tlast_payment_error: paymentIntentError,\n\t\t} = paymentIntent;\n\n\t\t// Subscription is active, and intent needs no further action.\n\t\t// Subscription is trialing, and intent needs no further action.\n\t\tif (\n\t\t\t( 'active' === status && 'succeeded' === paymentIntentStatus ) ||\n\t\t\t( 'trialing' === status && 'succeeded' === paymentIntentStatus )\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Could not complete with current payment method, allow client to try again.\n\t\tif ( 'incomplete' === status && 'requires_payment_method' === paymentIntentStatus ) {\n\t\t\tif ( paymentIntentError.message ) {\n\t\t\t\tthrow {\n\t\t\t\t\tmessage: paymentIntentError.message,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\t// Handle 3D Secure.\n\t\tif ( 'incomplete' === status && 'requires_action' === paymentIntentStatus ) {\n\t\t\treturn spFormElem.stripeInstance.handleCardPayment(\n\t\t\t\tpaymentIntentClientSecret\n\t\t\t)\n\t\t\t\t.then( ( result ) => {\n\t\t\t\t\tif ( result.error ) {\n\t\t\t\t\t\tthrow result.error;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\t\t}\n\t}\n\n\t// No initial charge needed, setup for future.\n\tif ( setupIntent ) {\n\t\tconst {\n\t\t\tstatus: setupIntentStatus,\n\t\t\tclient_secret: setupIntentClientSecret,\n\t\t} = setupIntent;\n\n\t\t// Handle 3D Secure.\n\t\tif ( 'requires_action' === setupIntentStatus ) {\n\t\t\treturn spFormElem.stripeInstance.handleCardSetup(\n\t\t\t\tsetupIntentClientSecret\n\t\t\t)\n\t\t\t\t.then( ( result ) => {\n\t\t\t\t\tif ( result.error ) {\n\t\t\t\t\t\tthrow result.error;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t} );\n\t\t// Could not complete with current payment method, allow client to try again.\n\t\t} else if ( 'requires_payment_method' === setupIntentStatus ) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// Unhandled status. Direct to error page.\n\treturn window.location.href = errorUrl;\n}\n","/* global simpayUpdatePaymentMethod, Stripe, jQuery, _ */\n\n/**\n * WordPress dependencies\n */\nimport domReady from '@wordpress/dom-ready';\n\n/**\n * Internal dependencies.\n */\nimport {\n\tupdatePaymentMethod as updateSubscriptionPaymentMethod,\n} from './payments/subscription.js';\n\nimport {\n\tsetup as setupCardPaymentMethod,\n\tcreate as createCardPaymentMethod,\n} from './payment-methods/card';\n\nfunction handleError( error, spFormElem, formData ) {\n\t// @todo DRY with other form handling.\n\tif ( ! _.isObject( error ) ) {\n\t\treturn;\n\t}\n\n\tconst {\n\t\tresponseJSON,\n\t\tresponseText,\n\t\tmessage,\n\t} = error;\n\n\tconst foundMessage = ( responseJSON && responseJSON.message ? responseJSON.message : responseText );\n\tconst errorMessage = message ? message : foundMessage;\n\n\tconst {\n\t\tshowError,\n\t\tenableForm,\n\t} = window.simpayApp;\n\n\tconst {\n\t\tdebugLog,\n\t} = window.spShared;\n\n\tshowError( spFormElem, formData, errorMessage );\n\tenableForm( spFormElem, formData );\n\n\tdebugLog( 'Payment Form Error:', error );\n}\n\n/**\n * Update a Customer with a new Source.\n *\n * @param {Object} result PaymentMethod object.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nasync function handlePaymentMethodUpdate( result, spFormElem, formData ) {\n\tif ( result.error ) {\n\t\tthrow result.error;\n\t}\n\n\tconst customer_id = spFormElem.find( 'input[name=\"customer_id\"]' ).val();\n\tconst subscription_id = spFormElem.find( 'input[name=\"subscription_id\"]' ).val();\n\tconst subscription_key = spFormElem.find( 'input[name=\"subscription_key\"]' ).val();\n\tconst _wpnonce = spFormElem.find( 'input[name=\"_wpnonce\"]' ).val();\n\tconst source_id = result.source.id;\n\n\t// Update a Subscription's PaymentMethod\n\tawait updateSubscriptionPaymentMethod(\n\t\tsubscription_id,\n\t\t{\n\t\t\t_wpnonce,\n\t\t\tsubscription_key,\n\t\t\tsource_id,\n\t\t\tcustomer_id,\n\t\t}\n\t)\n\t\t.fail( ( error ) => handleError( error, spFormElem, formData ) );\n\n\twindow.location.replace( window.location.href );\n}\n\n/**\n * Submit an \"Update Paymnent Method\" form.\n *\n * @param {Event} e Submit event.\n * @param {jQuery} spFormElem Form element jQuery object.\n * @param {Object} formData Configured form data.\n */\nfunction submitForm( e, spFormElem, formData ) {\n\te.preventDefault();\n\n\t// Remove existing errors.\n\twindow.simpayApp.showError( spFormElem, formData, '' );\n\n\t// Disable form while processing.\n\twindow.simpayApp.disableForm( spFormElem, formData, true );\n\n\ttry {\n\t\tcreateCardPaymentMethod( spFormElem, formData )\n\t\t\t.then( ( result ) => handlePaymentMethodUpdate( result, spFormElem, formData ) )\n\t\t\t.catch( ( error ) => handleError( error, spFormElem, formData ) );\n\t} catch ( error ) {\n\t\thandleError( error, spFormElem, formData );\n\t}\n}\n\n/**\n * Setup \"Update Paymnent Method\" form.\n */\nfunction setupForm() {\n\tconst formEl = document.getElementById( 'simpay-form-update-payment-method' );\n\n\tif ( ! formEl ) {\n\t\treturn;\n\t}\n\n\tconst {\n\t\ti18n,\n\t\tstripe: {\n\t\t\tkey,\n\t\t},\n\t} = simpayUpdatePaymentMethod;\n\n\tconst formData = {\n\t\tformDisplayType: 'embedded',\n\t\tcheckoutButtonLoadingText: i18n.loading,\n\t\tcheckoutButtonText: i18n.submit,\n\t\tstripeParams: {\n\t\t\tkey,\n\t\t},\n\t};\n\n\tconst spFormElem = jQuery( formEl );\n\tspFormElem.stripeInstance = Stripe( formData.stripeParams.key );\n\n\t// Setup Stripe Elements.\n\tsetupCardPaymentMethod( spFormElem, formData );\n\n\tformEl.addEventListener( 'submit', ( e ) => submitForm( e, spFormElem, formData ) );\n}\n\n// DOM Ready.\ndomReady( setupForm );\n","module.exports = jQuery;"],"sourceRoot":""}
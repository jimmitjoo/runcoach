{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/admin/subscription-settings.js","webpack:///external \"jQuery\""],"names":["spSubAdmin","$","body","spSubSettings","init","document","find","loadMultiPlanSubscriptions","initSortablePlans","on","e","preventDefault","addPlan","removePlan","setDefaultPlan","updateDefaultPlan","updatePlanSelect","togglePlans","val","trigger","el","sortable","items","cursor","axis","handle","scrollSensitivity","forcePlaceholderSize","opacity","stop","ui","orderPlans","helper","event","element","clone","attr","i","currentName","parseInt","Math","random","toString","end","simpayPlans","get","sort","a","b","compA","compB","each","idx","itm","append","is","prop","fieldKey","parent","data","savedDefaultField","getElementById","selectedDefaultField","querySelector","dataset","planId","value","firstRadio","checked","plan","closest","index","planIndex","wrapper","currentKey","length","action","counter","addPlanNonce","ajax","url","ajaxurl","method","success","response","chosen","error","spShared","debugLog","remove","ready","jQuery"],"mappings":"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","file":"simpay-admin-subcription-settings.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./js/admin/subscription-settings.js\");\n","/* global jQuery */\n\nlet spSubAdmin = {};\n\n( function( $ ) {\n\t'use strict';\n\n\tlet body,\n\t\tspSubSettings;\n\n\tspSubAdmin = {\n\n\t\tinit() {\n\t\t\t// We need to initialize these here because that's when the document is finally ready\n\t\t\tbody = $( document.body );\n\t\t\tspSubSettings = body.find( '#subscription-options-settings-panel' );\n\n\t\t\tthis.loadMultiPlanSubscriptions();\n\n\t\t\t// Initialize sortable fields for multi-plans\n\t\t\tthis.initSortablePlans( spSubSettings.find( '.simpay-multi-subscriptions tbody' ) );\n\n\t\t\t// Add plan button\n\t\t\tspSubSettings.find( '.simpay-add-plan' ).on( 'click.simpayAddPlan', function( e ) {\n\t\t\t\te.preventDefault();\n\n\t\t\t\tspSubAdmin.addPlan( e );\n\t\t\t} );\n\n\t\t\t// Remove Plan action\n\t\t\tspSubSettings.find( '.simpay-panel-field' ).on( 'click.simpayRemovePlan', '.simpay-remove-plan', function( e ) {\n\t\t\t\tspSubAdmin.removePlan( $( this ), e );\n\t\t\t} );\n\n\t\t\t// Search for and set the default plan on load.\n\t\t\tspSubAdmin.setDefaultPlan();\n\n\t\t\t// Update default subscription\n\t\t\tspSubSettings.find( '.simpay-multi-subscriptions' ).on( 'click.simpayUpdateDefaultPlan', '.simpay-multi-plan-default input[type=\"radio\"]', function( e ) {\n\t\t\t\tspSubAdmin.updateDefaultPlan( $( this ) );\n\t\t\t} );\n\n\t\t\t// Trigger update of plan ID on change of select\n\t\t\tspSubSettings.find( '.simpay-multi-subscriptions' ).on( 'change.simpayUpdatePlanSelect', '.simpay-multi-plan-select', function( e ) {\n\t\t\t\tspSubAdmin.updatePlanSelect( $( this ) );\n\t\t\t} );\n\n\t\t\t// Enable/Disable single subscription plan dropdown\n\t\t\tspSubSettings.find( '#_subscription_custom_amount' ).find( 'input[type=\"radio\"]' ).on( 'change.simpayToggleSubscription', function( e ) {\n\t\t\t\tspSubAdmin.togglePlans( $( this ) );\n\t\t\t} );\n\n\t\t\t// Trigger for default plan value if none are selected\n\t\t\tif ( '' === spSubSettings.find( '#simpay-multi-plan-default-value' ).val() ) {\n\t\t\t\tspSubSettings.find( '.simpay-multi-plan-default input[type=\"radio\"]:first' ).trigger( 'click.simpayUpdateDefaultPlan' );\n\t\t\t}\n\t\t},\n\n\t\tinitSortablePlans( el ) {\n\t\t\tel.sortable( {\n\t\t\t\titems: 'tr',\n\t\t\t\tcursor: 'move',\n\t\t\t\taxis: 'y',\n\t\t\t\thandle: 'td.sort-handle',\n\t\t\t\tscrollSensitivity: 40,\n\t\t\t\tforcePlaceholderSize: true,\n\t\t\t\topacity: 0.65,\n\t\t\t\tstop( e, ui ) {\n\t\t\t\t\tspSubAdmin.orderPlans();\n\t\t\t\t},\n\n\t\t\t\t// @link https://core.trac.wordpress.org/changeset/35809\n\t\t\t\thelper( event, element ) {\n\t\t\t\t\t/* `helper: 'clone'` is equivalent to `return element.clone();`\n\t\t\t\t\t * Cloning a checked radio and then inserting that clone next to the original\n\t\t\t\t\t * radio unchecks the original radio (since only one of the two can be checked).\n\t\t\t\t\t * We get around this by renaming the helper's inputs' name attributes so that,\n\t\t\t\t\t * when the helper is inserted into the DOM for the sortable, no radios are\n\t\t\t\t\t * duplicated, and no original radio gets unchecked.\n\t\t\t\t\t */\n\t\t\t\t\treturn element.clone()\n\t\t\t\t\t\t.find( ':input' )\n\t\t\t\t\t\t.attr( 'name', function( i, currentName ) {\n\t\t\t\t\t\t\treturn 'sort_' + parseInt( Math.random() * 100000, 10 ).toString() + '_' + currentName;\n\t\t\t\t\t\t} )\n\t\t\t\t\t\t.end();\n\t\t\t\t},\n\t\t\t} );\n\t\t},\n\n\t\tloadMultiPlanSubscriptions() {\n\t\t\tconst simpayPlans = spSubSettings.find( '.simpay-multi-sub' ).get();\n\n\t\t\tsimpayPlans.sort( function( a, b ) {\n\t\t\t\tconst compA = parseInt( $( a ).attr( 'rel' ), 10 );\n\t\t\t\tconst compB = parseInt( $( b ).attr( 'rel' ), 10 );\n\t\t\t\treturn ( compA < compB ) ? -1 : ( compA > compB ) ? 1 : 0;\n\t\t\t} );\n\n\t\t\tspSubSettings.find( simpayPlans ).each( function( idx, itm ) {\n\t\t\t\tspSubSettings.find( '.simpay-multi-subscriptions tbody' ).append( itm );\n\t\t\t} );\n\t\t},\n\n\t\ttogglePlans( el ) {\n\t\t\t// TODO DRY\n\n\t\t\tif ( 'enabled' === el.val() && el.is( ':checked' ) ) {\n\t\t\t\tbody.find( '#_single_plan' ).prop( 'disabled', true ).trigger( 'chosen:updated' );\n\t\t\t} else {\n\t\t\t\tbody.find( '#_single_plan' ).prop( 'disabled', false ).trigger( 'chosen:updated' );\n\t\t\t}\n\t\t},\n\n\t\tupdatePlanSelect( el ) {\n\t\t\tconst fieldKey = el.parent().data( 'field-key' );\n\n\t\t\tif ( spSubSettings.find( '#simpay-subscription-multi-plan-default-' + fieldKey + '-yes' ).is( ':checked' ) ) {\n\t\t\t\tspSubSettings.find( '#simpay-multi-plan-default-value' ).val( el.find( 'option:selected' ).val() );\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Validate (and potentially fix) the default subscription plan.\n\t\t */\n\t\tsetDefaultPlan() {\n\t\t\tconst savedDefaultField = document.getElementById( 'simpay-multi-plan-default-value' );\n\t\t\tconst selectedDefaultField = document.querySelector( '.simpay-multi-plan-default input:checked' );\n\n\t\t\t// Selected radio matches saved meta, do nothing.\n\t\t\tif ( selectedDefaultField && ( selectedDefaultField.dataset.planId === savedDefaultField.value ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// There is a selected default but it doesn't match, so update the hidden field.\n\t\t\tif ( selectedDefaultField && ( selectedDefaultField.dataset.planId !== savedDefaultField.value ) ) {\n\t\t\t\tsavedDefaultField.value = selectedDefaultField.dataset.planId;\n\t\t\t}\n\n\t\t\t// There is no selected default, updated the saved meta with the first option.\n\t\t\tif ( ! selectedDefaultField ) {\n\t\t\t\tconst firstRadio = document.querySelector( '.simpay-multi-plan-default input' );\n\n\t\t\t\tif ( ! firstRadio ) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Check...\n\t\t\t\tfirstRadio.checked = true;\n\n\t\t\t\t// Set hidden value.\n\t\t\t\tsavedDefaultField.value = firstRadio.dataset.planId;\n\t\t\t}\n\t\t},\n\n\t\tupdateDefaultPlan( el ) {\n\t\t\tconst plan = el.closest( '.simpay-multi-plan-default' ).parent().find( '.simpay-multi-plan-select' ).find( 'option:selected' ).val();\n\n\t\t\tspSubSettings.find( '#simpay-multi-plan-default-value' ).val( plan );\n\t\t},\n\n\t\torderPlans() {\n\t\t\tspSubSettings.find( '.simpay-multi-sub' ).each( function( index, el ) {\n\t\t\t\tconst planIndex = parseInt( $( el ).index( '.simpay-multi-sub' ) );\n\n\t\t\t\tspSubSettings.find( '.plan-order', el ).val( planIndex );\n\t\t\t} );\n\t\t},\n\n\t\taddPlan( e ) {\n\t\t\tconst wrapper = spSubSettings.find( '.simpay-multi-subscriptions tbody' ); // Main table\n\t\t\tconst currentKey = wrapper.find( 'tr' ).length;\n\n\t\t\tconst data = {\n\t\t\t\taction: 'simpay_add_plan',\n\t\t\t\tcounter: parseInt( currentKey ),\n\t\t\t\taddPlanNonce: body.find( '#simpay_add_plan_nonce' ).val(),\n\t\t\t};\n\n\t\t\te.preventDefault();\n\n\t\t\t$.ajax( {\n\t\t\t\turl: ajaxurl,\n\t\t\t\tmethod: 'POST',\n\t\t\t\tdata,\n\t\t\t\tsuccess( response ) {\n\t\t\t\t\twrapper.append( response );\n\t\t\t\t\twrapper.find( 'select' ).chosen();\n\t\t\t\t},\n\t\t\t\terror( response ) {\n\t\t\t\t\tspShared.debugLog( response );\n\t\t\t\t},\n\t\t\t} );\n\t\t},\n\n\t\tremovePlan( el, e ) {\n\t\t\te.preventDefault();\n\n\t\t\tel.closest( '.simpay-multi-sub' ).remove();\n\t\t\tspSubAdmin.setDefaultPlan();\n\t\t},\n\t};\n\n\t$( document ).ready( function( $ ) {\n\t\tspSubAdmin.init();\n\t} );\n}( jQuery ) );\n","module.exports = jQuery;"],"sourceRoot":""}
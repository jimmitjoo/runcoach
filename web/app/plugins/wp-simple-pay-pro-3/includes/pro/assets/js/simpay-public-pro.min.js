!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=43)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e,n){t.exports=n(22)},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t}},function(t,e,n){"use strict";var r=n(23);n.o(r,"apiRequest")&&n.d(e,"apiRequest",(function(){return r.apiRequest}));var o=n(24);n.d(e,"apiRequest",(function(){return o.a}))},function(t,e){t.exports=jQuery},function(t,e,n){"use strict";var r=n(1),o=n.n(r),i=n(7),a=n.n(i),u=n(21);function c(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0;if(!e||!Object.keys(e).length)return t;var n=t,r=t.indexOf("?");return-1!==r&&(e=Object.assign(Object(u.parse)(t.substr(r+1)),e),n=n.substr(0,r)),n+"?"+Object(u.stringify)(e)}var s=n(0),l=n.n(s),p=n(9),f=n.n(p),d=n(4);function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function y(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return Object(d.apiRequest)("v2/customer",y({form_values:f()(e[0],{hash:!0}),form_data:n,form_id:n.formId},t))}function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function v(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){l()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return Object(d.apiRequest)("v2/paymentintent/create",v({form_values:f()(e[0],{hash:!0}),form_data:n,form_id:n.formId},t))}function w(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return Object(d.apiRequest)("v2/paymentintent/confirm",v({form_values:f()(e[0],{hash:!0}),form_data:n,form_id:n.formId},t))}function O(t,e,n){var r=t.payment_intent,i=t.customer_id;return!!r.requires_action&&e.stripeInstance.handleCardAction(r.payment_intent_client_secret).then(function(){var t=a()(o.a.mark((function t(r){var a,u,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=r.error,u=r.paymentIntent,!a){t.next=3;break}throw a;case 3:return t.next=5,w({payment_intent_id:u.id,customer_id:i},e,n);case 5:return c=t.sent,t.abrupt("return",O({payment_intent:c,customer_id:i},e,n));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}var j=n(16),P=n(20),x=n(2),S=n.n(x),A=n(3),_=n.n(A),C=n(13),E=n.n(C),L=n(14),k=n.n(L),T=n(15),I=n.n(T),F=n(10),q=function(t){function e(){return S()(this,e),E()(this,k()(e).apply(this,arguments))}return I()(e,t),_()(e,[{key:"getSubtotal",value:function(){return Math.round(this.getUnitPrice()*this.getQuantity())}},{key:"getTotal",value:function(){return Math.round(this.getSubtotal()+this.getTax())}}]),e}(F.b),D=function(t){function e(t){var n;return S()(this,e),(n=E()(this,k()(e).call(this,t))).LineItem=q,n}return I()(e,t),_()(e,[{key:"getSubtotal",value:function(){var t=0;return this.getLineItems().forEach((function(e){t+=e.getSubtotal()})),t}},{key:"getDiscount",value:function(){var t=this.getCoupon(),e=0;if(!1===t)return e;var n=t.amount_off,r=t.percent_off;return r&&this.getLineItems().forEach((function(t){e+=Math.round(t.getSubtotal()*(r/100))})),n&&(e+=n),e}},{key:"getTax",value:function(){var t=0,e=this.getCoupon(),n=this.getTaxDecimal(),r=this.getLineItems();if(!1===e)return r.forEach((function(e){t+=Math.round(e.getSubtotal()*n)})),t;var o=e.percent_off,i=e.amount_off;if(o)return r.forEach((function(e){var r=e.getSubtotal()*(o/100),i=e.getSubtotal()-r;t+=Math.round(i*n)})),t;var a=this.getSubtotal();if(i){var u=a-i;return t+=Math.round(u*n)}}},{key:"getTotal",value:function(){var t=this.getSubtotal(),e=this.getTax(),n=this.getDiscount();return Math.round(t-n+e)}}]),e}(F.a);function N(t,e,n){return R.apply(this,arguments)}function R(){return(R=a()(o.a.mark((function t(e,n,r){var i,a,u,s,l;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.error){t.next=2;break}throw e.error;case 2:return t.next=4,h({source_id:e.source.id},n,r);case 4:if(i=t.sent,a=c(r.stripeParams.success_url,{customer_id:i.id}),!r.isSubscription&&!r.isRecurring){t.next=15;break}return t.next=9,Object(j.a)({customer_id:i.id},n,r);case 9:return s=t.sent,t.next=12,Object(j.b)(s,n,r);case 12:u=t.sent,t.next=23;break;case 15:return t.next=17,b({customer_id:i.id,payment_method_id:e.source.id},n,r);case 17:if((l=t.sent).requires_action){t.next=20;break}return t.abrupt("return",window.location.href=a);case 20:return t.next=22,O({customer_id:i.id,payment_intent:l},n,r);case 22:u=t.sent;case 23:if(!1!==u){t.next=25;break}return t.abrupt("return",window.location.href=a);case 25:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function B(t,e){var n=t.stripeInstance.elements(),r=t[0].querySelector(".simpay-card-wrap");r&&(t.cardElementInstance=n.create("card",Object(P.a)(t,r)),t.cardElementInstance.mount(r),t.cardElementInstance.on("ready",(function(){return window.simpayApp.enableForm(t,e)})),t.cardElementInstance.on("change",(function(n){window.simpayApp.enableForm(t,e),n.error?window.simpayApp.showError(t,e,n.error.message):window.simpayApp.showError(t,e,"")})))}function M(t,e){var n=e.currency,r=function(t,e){var n=t.find(".simpay-billing-address-container"),r=t.find(".simpay-customer-name").val()||null,o=t.find(".simpay-email").val()||null,i=t.find(".simpay-telephone").val()||null,a=0!==n.length?{line1:n.find(".simpay-address-street").val()||null,city:n.find(".simpay-address-city").val()||null,state:n.find(".simpay-address-state").val()||null,postal_code:n.find(".simpay-address-zip").val()||null,country:n.find(".simpay-address-country").val()||null}:null;return{name:r,email:o,phone:i,address:a}}(t);return t.stripeInstance.createSource(t.cardElementInstance,{type:"card",currency:n,owner:r})}n.d(e,"c",(function(){return N})),n.d(e,"d",(function(){return B})),n.d(e,"b",(function(){return M})),n.d(e,"a",(function(){return D}))},function(t,e){function n(t,e,n,r,o,i,a){try{var u=t[i](a),c=u.value}catch(t){return void n(t)}u.done?e(c):Promise.resolve(c).then(r,o)}t.exports=function(t){return function(){var e=this,r=arguments;return new Promise((function(o,i){var a=t.apply(e,r);function u(t){n(a,o,i,u,c,"next",t)}function c(t){n(a,o,i,u,c,"throw",t)}u(void 0)}))}}},function(t,e){function n(e){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=n=function(t){return typeof t}:t.exports=n=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(e)}t.exports=n},function(t,e){var n=/^(?:submit|button|image|reset|file)$/i,r=/^(?:input|select|textarea|keygen)/i,o=/(\[[^\[\]]*\])/g;function i(t,e,n){if(e.match(o)){!function t(e,n,r){if(0===n.length)return e=r;var o=n.shift(),i=o.match(/^\[(.+?)\]$/);if("[]"===o)return e=e||[],Array.isArray(e)?e.push(t(null,n,r)):(e._values=e._values||[],e._values.push(t(null,n,r))),e;if(i){var a=i[1],u=+a;isNaN(u)?(e=e||{})[a]=t(e[a],n,r):(e=e||[])[u]=t(e[u],n,r)}else e[o]=t(e[o],n,r);return e}(t,function(t){var e=[],n=new RegExp(o),r=/^([^\[\]]*)/.exec(t);for(r[1]&&e.push(r[1]);null!==(r=n.exec(t));)e.push(r[1]);return e}(e),n)}else{var r=t[e];r?(Array.isArray(r)||(t[e]=[r]),t[e].push(n)):t[e]=n}return t}function a(t,e,n){return n=n.replace(/(\r)?\n/g,"\r\n"),n=(n=encodeURIComponent(n)).replace(/%20/g,"+"),t+(t?"&":"")+encodeURIComponent(e)+"="+n}t.exports=function(t,e){"object"!=typeof e?e={hash:!!e}:void 0===e.hash&&(e.hash=!0);for(var o=e.hash?{}:"",u=e.serializer||(e.hash?i:a),c=t&&t.elements?t.elements:[],s=Object.create(null),l=0;l<c.length;++l){var p=c[l];if((e.disabled||!p.disabled)&&p.name&&(r.test(p.nodeName)&&!n.test(p.type))){var f=p.name,d=p.value;if("checkbox"!==p.type&&"radio"!==p.type||p.checked||(d=void 0),e.empty){if("checkbox"!==p.type||p.checked||(d=""),"radio"===p.type&&(s[p.name]||p.checked?p.checked&&(s[p.name]=!0):s[p.name]=!1),null==d&&"radio"==p.type)continue}else if(!d)continue;if("select-multiple"!==p.type)o=u(o,f,d);else{d=[];for(var m=p.options,y=!1,h=0;h<m.length;++h){var g=m[h],v=e.empty&&!g.value,b=g.value||v;g.selected&&b&&(y=!0,o=e.hash&&"[]"!==f.slice(f.length-2)?u(o,f+"[]",g.value):u(o,f,g.value))}!y&&e.empty&&(o=u(o,f,""))}}}if(e.empty)for(var f in s)s[f]||(o=u(o,f,""));return o}},function(t,e,n){"use strict";var r=n(8),o=n.n(r),i=n(0),a=n.n(i),u=n(2),c=n.n(u),s=n(3),l=n.n(s);function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var f=function(){function t(e,n){if(c()(this,t),this.cart=null,this.id=null,this.title=null,this.amount=0,this.quantity=1,this.subscription=!1,"object"!==o()(n))throw{id:"invalid-line-item-cart",message:"Item must have an cart."};this.cart=n,this.update(e)}return l()(t,[{key:"update",value:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this,{},t),n=e.id,r=e.title,i=e.amount,u=e.quantity,c=e.subscription;if("string"!=typeof n)throw{id:"invalid-line-item-id",message:"Item ID must be a string."};if(this.id=n,"string"!=typeof r)throw{id:"invalid-line-item-title",message:"Item title must be a string."};if(this.title=r,!Number.isSafeInteger(i))throw{id:"invalid-line-item-amount",message:"Item amount must be an integer."};if(this.amount=i,!Number.isSafeInteger(u))throw{id:"invalid-line-item-quantity",message:"Item quantity must be an integer."};if(this.quantity=u,!1!==c&&"object"!==o()(c))throw{id:"invalid-line-item-subscription",message:"Item subscription data must be a false or contain subscription data."};return this.subscription=c,this}},{key:"remove",value:function(){var t=this,e=this.cart.getLineItems().filter((function(e){var n=e.id;return t.id!==n}));return this.cart.items=e,this}},{key:"getUnitPrice",value:function(){return this.amount}},{key:"getQuantity",value:function(){return this.quantity}},{key:"getTax",value:function(){var t=0,e=0,n=this.cart.getTaxDecimal(),r=this.getQuantity(),o=this.getSubtotal();for(e=0;e<r;e++)t+=Math.round(o*n);return t}}]),t}(),d=f;function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var y=function(){function t(e){c()(this,t),this.items=[],this.currency="usd",this.taxPercent=0,this.coupon=!1,this.isNonDecimalCurrency=!1,this.update(e)}return l()(t,[{key:"update",value:function(t){var e=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){a()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this,{},t),n=e.currency,r=e.taxPercent,i=e.coupon,u=e.isNonDecimalCurrency;if("string"!=typeof n)throw{id:"invalid-currency",message:"Currency must be a string."};if(this.currency=n,isNaN(r))throw{id:"invalid-tax-percent",message:"Tax percentage must be a number."};if(this.taxPercent=parseFloat(r),!1!==i&&"object"!==o()(i))throw{id:"invalid-coupon",message:"Coupon must be a false or contain coupon data."};if(this.coupon=i,"boolean"!=typeof u)throw{id:"invalid-non-decimal-currency",message:"Declaring a non-decimal currency must be a boolean."};return this.isNonDecimalCurrency=u,this}},{key:"reset",value:function(){return new t}},{key:"getCoupon",value:function(){return this.coupon}},{key:"getTaxPercent",value:function(){return this.taxPercent}},{key:"getTaxDecimal",value:function(){return this.taxPercent/100}},{key:"getLineItems",value:function(){return this.items}},{key:"getLineItem",value:function(t){var e=this.getLineItems().filter((function(e){return e.id===t}));if(0===e.length)throw{id:"invalid-line-item",message:'Unable to retrieve line item "'.concat(t,'"')};return e[0]}},{key:"addLineItem",value:function(t){var e;return e=!0==t instanceof d?t:new this.LineItem(t,this),this.items.push(e),e}}]),t}();function h(t){var e=window.spShared,n=e.debugLog,r=e.convertToCents,o=window.spGeneral.booleans.isZeroDecimal,i=t.stripeParams.currency,a=t.amount,u=t.isSubscription,c=t.quantity,s=t.isTrial,l=t.planInterval,p=t.planIntervalCount,f=t.feePercent,d=t.feeAmount,m=t.taxPercent,y=t.setupFee,h={currency:i,items:[],taxPercent:0,isNonDecimalCurrency:o};if(isNaN(y)||h.items.push({id:"setup-fee",title:"Initial Setup Fee",amount:r(y),quantity:1,subscription:!1}),h.items.push({id:"plan-setup-fee",title:"Plan Setup Fee",amount:0,quantity:1,subscription:!1}),u)h.items.push({id:"base",title:"Subscription",amount:r(a),quantity:c,subscription:{isTrial:s,interval:l,intervalCount:p}});else{var g=a;!isNaN(d)&&d>0&&(g+=d,n("feeAmount:","Arbitrary fee amounts should be added to the base amount directly.")),h.items.push({id:"base",title:"One-time amount",amount:r(g),quantity:c,subscription:!1})}return isNaN(m)||(h.taxPercent=m),!isNaN(f)&&f>0&&(h.taxPercent=h.taxPercent+f,n("feePercent:","Arbitrary fee percentages should be added to the taxPercent directly.")),h}n.d(e,"c",(function(){return h})),n.d(e,"a",(function(){return y})),n.d(e,"b",(function(){return f}))},function(t,e,n){"use strict";function r(t,e,n){!function(t,e){var n=window.spShared,r=n.convertToDollars,o=n.formatCurrency,i=t.cart,a=r(i.getTotal()),u=o(a,!0);window.simpayApp.setCoreFinalAmount(t,e),t.find(".simpay-total-amount-value").text(u)}(e,n),function(t,e){var n=window.spShared,r=n.convertToDollars,o=n.formatCurrency,i=t.cart;try{var a=i.getLineItem("base"),u=a.subscription,c=u.interval,s=u.intervalCount,l=r(a.getTotal()),p=o(l,!0);p+=s>1?" every "+s+" "+c+"s":"/"+c,t.find(".simpay-total-amount-recurring-value").text(p)}catch(e){var f=o(r(i.getTotal()),!0);return t.find(".simpay-total-amount-recurring-value").text(f)}}(e),function(t,e){var n=window.spShared,r=n.convertToDollars,o=n.formatCurrency,i=t.cart,a=r(i.getTax()),u=o(a,!0);t.find(".simpay-tax-amount-value").text(u)}(e)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return o})),n.d(e,"a",(function(){return i}));var r=n(11);function o(t,e,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=e.find(".simpay-custom-amount-input"),a=e.find(".simpay-errors");if(0===i.length)return!0;var u,c,s=window.spShared,l=s.convertToCents,p=s.formatCurrency,f=s.unformatCurrency,d=i.val();n.isSubscription?(n.customAmount=f(""!==d?d:n.subMinAmount),n.planAmount=n.customAmount,n.customPlanAmount=n.planAmount):n.customAmount=f(""!==d?d:n.minAmount);var m=f(i.val());u=n.isSubscription?f(n.subMinAmount):f(n.minAmount),(c=-1<m&&m>=u)?(a.empty(),i.removeClass("simpay-input-error")):(n.isSubscription?a.html(n.subMinCustomAmountError):a.html(n.minCustomAmountError),i.addClass("simpay-input-error"));try{var y=e.cart.getLineItem("base");return y.update({amount:l(m)}),i.val(p(m,!1)),Object(r.a)(t,e,n),!0===o&&e.trigger("totalChanged",[e,n]),c}catch(t){return!1}}function i(t,e,n){var r=e.find('.simpay-custom-plan-option[value="simpay_custom_plan"]'),o=window.spShared.convertToCents;r.prop("checked",!0).trigger("change"),n.useCustomPlan=!0,n.customPlanAmount=o(r.val()),e.find(".simpay-has-custom-plan").val("true")}},function(t,e,n){var r=n(8),o=n(33);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?o(t):e}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(34);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"c",(function(){return p})),n.d(e,"b",(function(){return f}));var r=n(0),o=n.n(r),i=n(9),a=n.n(i),u=n(4);function c(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?c(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0,n=arguments.length>2?arguments[2]:void 0;return Object(u.apiRequest)("v2/subscription",s({form_values:a()(e[0],{hash:!0}),form_data:n,form_id:n.formId},t))}function p(t,e){var n=e.customer_id;return Object(u.apiRequest)("v2/subscription/payment_method/".concat(t,"/").concat(n),{form_values:e})}function f(t,e,n){var r=t.status,o=t.latest_invoice.payment_intent,i=t.pending_setup_intent,a=n.stripeParams,u=(a.success_url,a.error_url);if(!o&&!i)return!1;if(o){var c=o.status,s=o.client_secret,l=o.last_payment_error;if("active"===r&&"succeeded"===c||"trialing"===r&&"succeeded"===c)return!1;if("incomplete"===r&&"requires_payment_method"===c){if(l.message)throw{message:l.message};return!1}if("incomplete"===r&&"requires_action"===c)return e.stripeInstance.handleCardPayment(s).then((function(t){if(t.error)throw t.error;return!1}))}if(i){var p=i.status,f=i.client_secret;if("requires_action"===p)return e.stripeInstance.handleCardSetup(f).then((function(t){if(t.error)throw t.error;return!1}));if("requires_payment_method"===p)return!1}return window.location.href=u}},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return o}));n(11);function r(e,n){var r=t,o=e.find(".simpay-coupon-field"),i=e.find(".simpay-coupon-message"),a=e.find(".simpay-coupon-loading"),u=e.find(".simpay-remove-coupon"),c=e.find(".simpay-coupon"),s=window.spShared,l=(s.convertToCents,s.debugLog),p="",f="";if(o.val()||n.couponCode){var d={coupon:p=n.couponCode?n.couponCode:o.val(),amount:e.cart.getSubtotal(),action:"simpay_get_coupon",form_id:n.formId,couponNonce:e.find("#simpay_coupon_nonce").val()};i.text(""),u.hide(),o.val(""),a.show(),r.ajax({url:window.spGeneral.strings.ajaxurl,method:"POST",data:d,dataType:"json",success:function(t){if(t.success){n.couponCode=p,n.discount=t.discount;try{e.cart.update({coupon:t.stripeCoupon})}catch(t){l(t)}var o=window.spShared.formatCurrency;f=t.coupon.code+": ","percent"===t.coupon.type?f+=t.coupon.amountOff+spGeneral.i18n.couponPercentOffText:"amount"===t.coupon.type&&(f+=o(t.coupon.amountOff,!0)+" "+spGeneral.i18n.couponAmountOffText),r(".coupon-details").remove(),i.append(f).show(),r("<input />",{name:"simpay_coupon_details",type:"hidden",value:f,class:"simpay-coupon-details"}).appendTo(i),u.show(),c.val(p),a.hide(),e.trigger("simpayCouponApplied")}else i.show().append(r("<p />").addClass("simpay-field-error").text(t.data.error)),a.hide()},error:function(t){var e="";(0,window.spShared.debugLog)("Coupon error",t.responseText),t.responseText&&(e=t.responseText),i.show().append(r("<p />").addClass("simpay-field-error").text(e)),a.hide()},complete:function(t){e.trigger("totalChanged",[e,n,!1])}})}}function o(t,e){var n=window.spShared.debugLog;try{t.cart.update({coupon:!1}),t.trigger("simpayCouponRemoved"),t.trigger("totalChanged",[t,e,!1])}catch(t){n(t)}t.find(".simpay-coupon-loading").hide(),t.find(".simpay-remove-coupon").hide(),t.find(".simpay-coupon-message").text("").hide(),t.find(".simpay-coupon").val(""),e.couponCode="",e.discount=0}}).call(this,n(5))},function(t,e,n){"use strict";(function(t){n.d(e,"c",(function(){return i})),n.d(e,"d",(function(){return a})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return c}));var r=n(12),o=n(6);function i(e,n,i){var s=i.formId,l=i.formInstance,p=i.formDisplayType,f=i.stripeParams,d=f.country,m=f.currency,y=i.hasPaymentRequestButton;if(y){var h=y.id,g=y.i18n,v=y.requestPayerName,b=y.requestPayerEmail,w=y.requestShipping,O=y.shippingOptions,j=y.type,P=window.simpayApp,x=P.triggerBrowserValidation,S=P.disableForm,A=window.simpayAppPro.paymentRequestButtons,C=(window.spShared.convertToCents,n.stripeInstance),E=n.cart,L=C.elements(),k="".concat(l,"-").concat(s);A[k]=C.paymentRequest({country:d,currency:m.toLowerCase(),total:{label:g.totalLabel,amount:E.getTotal()},displayItems:c(n,i),requestPayerName:v,requestPayerEmail:b,requestShipping:w});var T=L.create("paymentRequestButton",{paymentRequest:A[k],style:{paymentRequestButton:{type:j}}});A[k].canMakePayment().then((function(t){if(null!==t){var e;if("overlay"===p){var o=document.querySelectorAll('form[data-simpay-form-id="'.concat(i.formId,'"] #').concat(i.hasPaymentRequestButton.id," .simpay-payment-request-button-container__button"));e=o[o.length-1]}else e=document.querySelector('form[data-simpay-form-instance="'.concat(i.formInstance,'"] #').concat(i.hasPaymentRequestButton.id," .simpay-payment-request-button-container__button"));e&&(e.innerHTML="",T.mount(e)),T.on("click",(function(t){u(n,i)||(t.preventDefault(),x(n,i)),Object(r.b)(null,n,i,!1)||t.preventDefault(),a(n,i)}))}else{var c=document.querySelectorAll('form[data-simpay-form-id="'.concat(s,'"] #').concat(h));c.length>0&&_.each(c,(function(t){return t.style.display="none"}))}})),A[k].on("shippingaddresschange",(function(t){t.updateWith({status:"success",shippingOptions:O})})),A[k].on("source",(function(e){var r=e.payerEmail,a=e.payerName,u=e.complete;return S(n,i,!0),u("success"),r&&""!==r&&t("<input>").attr({type:"hidden",name:"simpay_email",value:r}).appendTo(n),a&&""!==a&&t("<input>").attr({type:"hidden",name:"simpay_name",value:a}).appendTo(n),Object(o.c)(e,n,i)}))}}function a(t,e){var n=e.formId,r=e.formInstance,o=e.hasPaymentRequestButton;if(o){var a=o.i18n,u=window.simpayAppPro.paymentRequestButtons,s=(window.spShared.convertToCents,t.cart),l="".concat(r,"-").concat(n);u.hasOwnProperty(l)||i(0,t,e),u[l].update({total:{label:a.totalLabel,amount:s.getTotal()},displayItems:c(t,e)})}}function u(t,e){var n=!0;return _.each(t[0].querySelectorAll(".simpay-form-control"),(function(t){if(!function(t){var e=["simpay-customer-name-container","simpay-email-container","simpay-card-container","simpay-address-container","simpay-address-street-container","simpay-address-city-container","simpay-address-state-container","simpay-address-zip-container","simpay-address-country-container","simpay-telephone-container"],n=t.classList,r=!1;return n.forEach((function(t){-1!==e.indexOf(t)&&(r=!0)})),r}(t)){var e=t.querySelectorAll("input");_.each(e,(function(t){t.required&&(t.validity.valid||(n=!1))}))}})),n}function c(t,e){var n=[],r=(window.spShared.convertToCents,t.cart),o=e.hasPaymentRequestButton.i18n;try{var i=r.getLineItem("base");n.push({label:i.title?i.title:o.planLabel,amount:i.getSubtotal()})}catch(t){}var a=0;try{a+=r.getLineItem("plan-setup-fee").getSubtotal()}catch(t){}try{a+=r.getLineItem("setup-fee").getSubtotal()}catch(t){}return a>0&&n.push({label:o.setupFeeLabel,amount:a}),r.taxPercent>0&&n.push({label:o.taxLabel.replace("%s",r.getTaxPercent()),amount:r.getTax()}),r.getDiscount()>0&&n.push({label:o.couponLabel.replace("%s",r.getCoupon().name),amount:-1*r.getDiscount()}),n}}).call(this,n(5))},,function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return c}));var r=n(10),o=n(6),i={base:{color:"#32325d",fontFamily:"Roboto, Open Sans, Segoe UI, sans-serif",fontSize:"15px",fontSmoothing:"antialiased",fontWeight:500,"::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}};function a(t,e){return{hidePostalCode:!!t[0].querySelector(".simpay-address-zip")||"no"===e.dataset.showPostalCode,style:function(t,e){if(document.getElementById("simpay-stripe-element-styles"))return i;var n,r=document.createElement("style");if(r.id="simpay-stripe-element-styles",(n=document.querySelector("input.simpay-email"))||(n=document.querySelector('body [role="main"] input:not([type="hidden"])')),n){var o=window.getComputedStyle(n),a=(window.getComputedStyle(n,"::placeholder"),["top","right","bottom","left"].map((function(t){return"border-".concat(t,"-color: ").concat(o.getPropertyValue("border-".concat(t,"-color")),";\n\t\t\tborder-").concat(t,"-width: ").concat(o.getPropertyValue("border-".concat(t,"-width")),";\n\t\t\tborder-").concat(t,"-style: ").concat(o.getPropertyValue("border-".concat(t,"-style")),";\n\t\t\tpadding-").concat(t,": ").concat(o.getPropertyValue("padding-".concat(t)),";")}))),u=["top-right","bottom-right","bottom-left","top-left"].map((function(t){return"border-".concat(t,"-radius: ").concat(o.getPropertyValue("border-".concat(t,"-radius")),";")}));return r.innerHTML=".StripeElement.simpay-card-wrap {\n\t\t\tbackground-color: ".concat(o.getPropertyValue("background-color"),";\n\t\t\t").concat(a.join(""),"\n\t\t\t").concat(u.join(""),"\n\t\t}"),document.body.appendChild(r),{base:{color:o.getPropertyValue("color"),fontFamily:o.getPropertyValue("font-family"),fontSize:o.getPropertyValue("font-size"),fontWeight:o.getPropertyValue("font-weight"),fontSmoothing:o.getPropertyValue("-webkit-font-smoothing"),"::placeholder":{color:"#c7c7c7"}}}}return r.innerHTML=".StripeElement.simpay-card-wrap {\n\t\t\tbackground: #fff;\n\t\t\tborder: 1px solid #d1d1d1;\n\t\t\tborder-radius: 4px;\n\t\t\tpadding: 0.4375em;\n\t\t\theight: 36px;\n\t\t\tmin-height: 36px;\n\t\t}",document.body.appendChild(r),i}()}}function u(t,e,n){if(_.isObject(t)){var r=t.responseJSON,o=t.responseText,i=t.message,a=r&&r.message?r.message:o,u=i||a,c=window.simpayApp,s=c.showError,l=c.enableForm,p=window.spShared.debugLog;s(e,n,u),l(e,n),p("Payment Form Error:",t)}}function c(t,e,n){var i=window.simpayApp,a=i.isStripeCheckoutForm,c=i.disableForm,s=window.spShared.debugLog;if(!a(n)){c(e,n,!0);var l=e[0];if(l.querySelector(".simpay-checkout-btn"))try{var p=Object(r.c)(n),f=p.items,d=p.currency,m=p.taxPercent,y=p.isNonDecimalCurrency,h=new o.a({currency:d,taxPercent:m,isNonDecimalCurrency:y});f.length>0&&f.forEach((function(t){h.addLineItem(t)})),e.cart=h,Object(o.d)(e,n),l.addEventListener("submit",(function(t){return function(t,e,n){if(t.preventDefault(),window.simpayApp.showError(e,n,""),window.simpayApp.disableForm(e,n,!0),!e[0].checkValidity())return window.simpayApp.triggerBrowserValidation(e,n),void window.simpayApp.enableForm(e,n);if(e.trigger("simpayBeforeStripePayment",[e,n]),n.isValid)try{Object(o.b)(e,n).then((function(t){return Object(o.c)(t,e,n)})).catch((function(t){return u(t,e,n)}))}catch(t){u(t,e,n)}else window.simpayApp.enableForm(e,n)}(t,e,n)}))}catch(t){s(t.id,t.message)}}}},function(t,e,n){"use strict";var r=n(35),o=n(36),i=n(26);t.exports={formats:i,parse:o,stringify:r}},function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",a=r.toStringTag||"@@toStringTag";function u(t,e,n,r){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),a=new j(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return x()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var u=b(a,n);if(u){if(u===s)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=c(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===s)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,a),i}function c(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=u;var s={};function l(){}function p(){}function f(){}var d={};d[o]=function(){return this};var m=Object.getPrototypeOf,y=m&&m(m(P([])));y&&y!==e&&n.call(y,o)&&(d=y);var h=f.prototype=l.prototype=Object.create(d);function g(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function v(t){var e;this._invoke=function(r,o){function i(){return new Promise((function(e,i){!function e(r,o,i,a){var u=c(t[r],t,o);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==typeof l&&n.call(l,"__await")?Promise.resolve(l.__await).then((function(t){e("next",t,i,a)}),(function(t){e("throw",t,i,a)})):Promise.resolve(l).then((function(t){s.value=t,i(s)}),(function(t){return e("throw",t,i,a)}))}a(u.arg)}(r,o,e,i)}))}return e=e?e.then(i,i):i()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return s;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var r=c(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,s;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,s):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,s)}function w(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(w,this),this.reset(!0)}function P(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:x}}function x(){return{value:void 0,done:!0}}return p.prototype=h.constructor=f,f.constructor=p,f[a]=p.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,a in t||(t[a]="GeneratorFunction")),t.prototype=Object.create(h),t},t.awrap=function(t){return{__await:t}},g(v.prototype),v.prototype[i]=function(){return this},t.AsyncIterator=v,t.async=function(e,n,r,o){var i=new v(u(e,n,r,o));return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(h),h[a]="Generator",h[o]=function(){return this},h.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=P,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return a.type="throw",a.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var u=n.call(i,"catchLoc"),c=n.call(i,"finallyLoc");if(u&&c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),s},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),O(n),s}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;O(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:P(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},t}(t.exports);try{regeneratorRuntime=r}catch(t){Function("r","regeneratorRuntime = r")(r)}},function(t,e){Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},Number.isSafeInteger=Number.isSafeInteger||function(t){return Number.isInteger(t)&&Math.abs(t)<=Number.MAX_SAFE_INTEGER},Number.MAX_SAFE_INTEGER||(Number.MAX_SAFE_INTEGER=9007199254740991)},function(t,e,n){"use strict";(function(t){function r(e,n){return t.ajax({data:n,method:"POST",url:"".concat(wpApiSettings.root,"wpsp/").concat(e),beforeSend:function(t){t.setRequestHeader("X-WP-Nonce",wpApiSettings.nonce)}})}n.d(e,"a",(function(){return r}))}).call(this,n(5))},function(t,e,n){"use strict";var r=Object.prototype.hasOwnProperty,o=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),i=function(t,e){for(var n=e&&e.plainObjects?Object.create(null):{},r=0;r<t.length;++r)void 0!==t[r]&&(n[r]=t[r]);return n};t.exports={arrayToObject:i,assign:function(t,e){return Object.keys(e).reduce((function(t,n){return t[n]=e[n],t}),t)},compact:function(t){for(var e=[{obj:{o:t},prop:"o"}],n=[],r=0;r<e.length;++r)for(var o=e[r],i=o.obj[o.prop],a=Object.keys(i),u=0;u<a.length;++u){var c=a[u],s=i[c];"object"==typeof s&&null!==s&&-1===n.indexOf(s)&&(e.push({obj:i,prop:c}),n.push(s))}return function(t){for(var e;t.length;){var n=t.pop();if(e=n.obj[n.prop],Array.isArray(e)){for(var r=[],o=0;o<e.length;++o)void 0!==e[o]&&r.push(e[o]);n.obj[n.prop]=r}}return e}(e)},decode:function(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(e){return t}},encode:function(t){if(0===t.length)return t;for(var e="string"==typeof t?t:String(t),n="",r=0;r<e.length;++r){var i=e.charCodeAt(r);45===i||46===i||95===i||126===i||i>=48&&i<=57||i>=65&&i<=90||i>=97&&i<=122?n+=e.charAt(r):i<128?n+=o[i]:i<2048?n+=o[192|i>>6]+o[128|63&i]:i<55296||i>=57344?n+=o[224|i>>12]+o[128|i>>6&63]+o[128|63&i]:(r+=1,i=65536+((1023&i)<<10|1023&e.charCodeAt(r)),n+=o[240|i>>18]+o[128|i>>12&63]+o[128|i>>6&63]+o[128|63&i])}return n},isBuffer:function(t){return null!=t&&!!(t.constructor&&t.constructor.isBuffer&&t.constructor.isBuffer(t))},isRegExp:function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},merge:function t(e,n,o){if(!n)return e;if("object"!=typeof n){if(Array.isArray(e))e.push(n);else{if("object"!=typeof e)return[e,n];(o.plainObjects||o.allowPrototypes||!r.call(Object.prototype,n))&&(e[n]=!0)}return e}if("object"!=typeof e)return[e].concat(n);var a=e;return Array.isArray(e)&&!Array.isArray(n)&&(a=i(e,o)),Array.isArray(e)&&Array.isArray(n)?(n.forEach((function(n,i){r.call(e,i)?e[i]&&"object"==typeof e[i]?e[i]=t(e[i],n,o):e.push(n):e[i]=n})),e):Object.keys(n).reduce((function(e,i){var a=n[i];return r.call(e,i)?e[i]=t(e[i],a,o):e[i]=a,e}),a)}}},function(t,e,n){"use strict";var r=String.prototype.replace,o=/%20/g;t.exports={default:"RFC3986",formatters:{RFC1738:function(t){return r.call(t,o,"+")},RFC3986:function(t){return t}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},function(t,e,n){"use strict";function r(t,e,n){var r,o=window.spShared.convertToCents;if(0!==e.find(".simpay-amount-dropdown").length?(r=e.find(".simpay-amount-dropdown").find("option:selected").data("amount"),e.trigger("simpayDropdownAmountChange")):0!==e.find(".simpay-amount-radio").length&&(r=e.find(".simpay-amount-radio").find('input[type="radio"]:checked').data("amount"),e.trigger("simpayRadioAmountChange")),r>0)try{e.cart.getLineItem("base").update({amount:o(r)}),n.amount=r,e.trigger("totalChanged",[e,n])}catch(t){}}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n(0),o=n.n(r);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t,e,n){var r=window.spShared,a=r.convertToCents,u=r.formatCurrency,c=r.unformatCurrency,s=e.find(".simpay-plan-wrapper");if(0!==s.length){var l,p,f,d,m,y,h,g,v=e.find(".simpay-errors"),b=e.find(".simpay-custom-amount-input"),w=s.find(".simpay-multi-sub"),O="";l=(O=w.first().is("option")?w.filter(":selected"):w.filter(":checked")).data("plan-id")||"",p=O.text(),f=O.data("plan-setup-fee")||0,d=O.data("plan-amount")||0,m=O.data("plan-interval")||"",y=O.data("plan-interval-count")||1,h=void 0!==O.data("plan-trial"),g=O.data("plan-max-charges")||0,h&&(n.amount=0),n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},n,{planId:l,planSetupFee:f,planAmount:d,planInterval:m,planIntervalCount:y,isTrial:h}),O.hasClass("simpay-custom-plan-option")?e.find(".simpay-has-custom-plan").val("true"):e.find(".simpay-has-custom-plan").val(""),n.useCustomPlan="simpay_custom_plan"===O.val(),v.empty(),b.removeClass("simpay-input-error"),n.useCustomPlan?(b.val(""),n.amount=0,b.is(":focus")||b.focus()):b.val(u(d));var j=e.cart;try{j.getLineItem("plan-setup-fee").update({amount:a(c(f))});var P=j.getLineItem("base");P.update({title:p||P.title,amount:a(d),subscription:{isTrial:h,interval:m,intervalCount:y}}),e.find(".simpay-multi-plan-id").val(l),e.find(".simpay-multi-plan-setup-fee").val(f),e.find(".simpay-max-charges").val(g),e.trigger("simpayMultiPlanChanged"),e.trigger("totalChanged",[e,n])}catch(t){}}}},function(t,e,n){"use strict";(function(t,r){function o(e,n,o){t.datepicker&&n.find(".simpay-date-input").datepicker({dateFormat:o.dateFormat,beforeShow:function(){r(".ui-datepicker").css("font-size",14)}})}n.d(e,"a",(function(){return o}))}).call(this,n(5),n(5))},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));n(17),n(11);function r(t,e,n){var r=1;n.quantity=r;e.cart;e.find(".simpay-quantity-dropdown").length?(r=parseFloat(e.find(".simpay-quantity-dropdown").find("option:selected").data("quantity")),e.trigger("simpayDropdownQuantityChange")):e.find(".simpay-quantity-radio").length?(r=parseFloat(e.find(".simpay-quantity-radio").find('input[type="radio"]:checked').data("quantity")),e.trigger("simpayRadioQuantityChange")):e.find(".simpay-quantity-input").length&&(r=parseFloat(e.find(".simpay-quantity-input").val()),e.trigger("simpayNumberQuantityChange")),r<1&&(r=1);try{e.cart.getLineItem("base").update({quantity:r}),n.quantity=r,e.find(".simpay-quantity").val(r),e.trigger("totalChanged",[e,n])}catch(t){}}},function(t,e,n){"use strict";function r(t,e){var n=t.find(".simpay-shipping-address-container"),r=t.find(".simpay-same-address-toggle").is(":checked");n.toggle().find("input, select").prop("disabled",r)}n.d(e,"a",(function(){return r}))},function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var r=n(8),o=n.n(r),i=n(18);function a(t,e,n){var r=!1;"object"===o()(t)?(t.preventDefault(),r=t.target.dataset.formId):r=t;var a=document.querySelectorAll('.simpay-modal[data-form-id="'+r+'"]');if(0!==a.length)if(a=a[a.length-1],document.body.appendChild(a),"0"!==getComputedStyle(a).getPropertyValue("opacity"))a.style.opacity=0,a.style.height=0;else{a.style.opacity=1,a.style.height="100%";var u=window.simpayApp.spFormElems[r],c=window.simpayApp.spFormData[r];Object(i.c)(t,u,c),function(t){var e=["button:not([disabled])",'input:not([type="hidden"]):not([aria-hidden]):not([disabled])',"select:not([disabled])","textarea:not([disabled])"].join(","),n=t.querySelector(e);n&&(n.focus(),n.parentElement.classList.add("is-focused"))}(a)}}var u=!1;function c(t,e,n){if(!0!==u){u=!0;var r=document.querySelectorAll("input.simpay-modal-control"),o=document.querySelectorAll("*:not(input).simpay-modal-control");_.each(r,(function(t){t.addEventListener("change",a)})),_.each(o,(function(t){t.addEventListener("click",a)}))}}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e,n){"use strict";var r=n(25),o=n(26),i={brackets:function(t){return t+"[]"},indices:function(t,e){return t+"["+e+"]"},repeat:function(t){return t}},a=Date.prototype.toISOString,u={delimiter:"&",encode:!0,encoder:r.encode,encodeValuesOnly:!1,serializeDate:function(t){return a.call(t)},skipNulls:!1,strictNullHandling:!1},c=function t(e,n,o,i,a,c,s,l,p,f,d,m){var y=e;if("function"==typeof s)y=s(n,y);else if(y instanceof Date)y=f(y);else if(null===y){if(i)return c&&!m?c(n,u.encoder):n;y=""}if("string"==typeof y||"number"==typeof y||"boolean"==typeof y||r.isBuffer(y))return c?[d(m?n:c(n,u.encoder))+"="+d(c(y,u.encoder))]:[d(n)+"="+d(String(y))];var h,g=[];if(void 0===y)return g;if(Array.isArray(s))h=s;else{var v=Object.keys(y);h=l?v.sort(l):v}for(var b=0;b<h.length;++b){var w=h[b];a&&null===y[w]||(g=Array.isArray(y)?g.concat(t(y[w],o(n,w),o,i,a,c,s,l,p,f,d,m)):g.concat(t(y[w],n+(p?"."+w:"["+w+"]"),o,i,a,c,s,l,p,f,d,m)))}return g};t.exports=function(t,e){var n=t,a=e?r.assign({},e):{};if(null!==a.encoder&&void 0!==a.encoder&&"function"!=typeof a.encoder)throw new TypeError("Encoder has to be a function.");var s=void 0===a.delimiter?u.delimiter:a.delimiter,l="boolean"==typeof a.strictNullHandling?a.strictNullHandling:u.strictNullHandling,p="boolean"==typeof a.skipNulls?a.skipNulls:u.skipNulls,f="boolean"==typeof a.encode?a.encode:u.encode,d="function"==typeof a.encoder?a.encoder:u.encoder,m="function"==typeof a.sort?a.sort:null,y=void 0!==a.allowDots&&a.allowDots,h="function"==typeof a.serializeDate?a.serializeDate:u.serializeDate,g="boolean"==typeof a.encodeValuesOnly?a.encodeValuesOnly:u.encodeValuesOnly;if(void 0===a.format)a.format=o.default;else if(!Object.prototype.hasOwnProperty.call(o.formatters,a.format))throw new TypeError("Unknown format option provided.");var v,b,w=o.formatters[a.format];"function"==typeof a.filter?n=(b=a.filter)("",n):Array.isArray(a.filter)&&(v=b=a.filter);var O,j=[];if("object"!=typeof n||null===n)return"";O=a.arrayFormat in i?a.arrayFormat:"indices"in a?a.indices?"indices":"repeat":"indices";var P=i[O];v||(v=Object.keys(n)),m&&v.sort(m);for(var x=0;x<v.length;++x){var S=v[x];p&&null===n[S]||(j=j.concat(c(n[S],S,P,l,p,f?d:null,b,m,y,h,w,g)))}var A=j.join(s),_=!0===a.addQueryPrefix?"?":"";return A.length>0?_+A:""}},function(t,e,n){"use strict";var r=n(25),o=Object.prototype.hasOwnProperty,i={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:r.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},a=function(t,e,n){if(t){var r=n.allowDots?t.replace(/\.([^.[]+)/g,"[$1]"):t,i=/(\[[^[\]]*])/g,a=/(\[[^[\]]*])/.exec(r),u=a?r.slice(0,a.index):r,c=[];if(u){if(!n.plainObjects&&o.call(Object.prototype,u)&&!n.allowPrototypes)return;c.push(u)}for(var s=0;null!==(a=i.exec(r))&&s<n.depth;){if(s+=1,!n.plainObjects&&o.call(Object.prototype,a[1].slice(1,-1))&&!n.allowPrototypes)return;c.push(a[1])}return a&&c.push("["+r.slice(a.index)+"]"),function(t,e,n){for(var r=e,o=t.length-1;o>=0;--o){var i,a=t[o];if("[]"===a)i=(i=[]).concat(r);else{i=n.plainObjects?Object.create(null):{};var u="["===a.charAt(0)&&"]"===a.charAt(a.length-1)?a.slice(1,-1):a,c=parseInt(u,10);!isNaN(c)&&a!==u&&String(c)===u&&c>=0&&n.parseArrays&&c<=n.arrayLimit?(i=[])[c]=r:i[u]=r}r=i}return r}(c,e,n)}};t.exports=function(t,e){var n=e?r.assign({},e):{};if(null!==n.decoder&&void 0!==n.decoder&&"function"!=typeof n.decoder)throw new TypeError("Decoder has to be a function.");if(n.ignoreQueryPrefix=!0===n.ignoreQueryPrefix,n.delimiter="string"==typeof n.delimiter||r.isRegExp(n.delimiter)?n.delimiter:i.delimiter,n.depth="number"==typeof n.depth?n.depth:i.depth,n.arrayLimit="number"==typeof n.arrayLimit?n.arrayLimit:i.arrayLimit,n.parseArrays=!1!==n.parseArrays,n.decoder="function"==typeof n.decoder?n.decoder:i.decoder,n.allowDots="boolean"==typeof n.allowDots?n.allowDots:i.allowDots,n.plainObjects="boolean"==typeof n.plainObjects?n.plainObjects:i.plainObjects,n.allowPrototypes="boolean"==typeof n.allowPrototypes?n.allowPrototypes:i.allowPrototypes,n.parameterLimit="number"==typeof n.parameterLimit?n.parameterLimit:i.parameterLimit,n.strictNullHandling="boolean"==typeof n.strictNullHandling?n.strictNullHandling:i.strictNullHandling,""===t||null==t)return n.plainObjects?Object.create(null):{};for(var u="string"==typeof t?function(t,e){for(var n={},r=e.ignoreQueryPrefix?t.replace(/^\?/,""):t,a=e.parameterLimit===1/0?void 0:e.parameterLimit,u=r.split(e.delimiter,a),c=0;c<u.length;++c){var s,l,p=u[c],f=p.indexOf("]="),d=-1===f?p.indexOf("="):f+1;-1===d?(s=e.decoder(p,i.decoder),l=e.strictNullHandling?null:""):(s=e.decoder(p.slice(0,d),i.decoder),l=e.decoder(p.slice(d+1),i.decoder)),o.call(n,s)?n[s]=[].concat(n[s]).concat(l):n[s]=l}return n}(t,n):t,c=n.plainObjects?Object.create(null):{},s=Object.keys(u),l=0;l<s.length;++l){var p=s[l],f=a(p,u[p],n);c=r.merge(c,f,n)}return r.compact(c)}},,function(t,e,n){"use strict";var r=n(29),o=n(17),i=n(27),a=(n(30),n(11)),u=n(28),c=n(31),s=n(32),l=n(12),p=n(18);e.a=_.extend(_.reduce(["setupStripeElementsForm","createCard","getCardConfig","handleCardFocus","focusFirstField","beforeSubmitPayment"],(function(t,e){return t[e]=function(t){return window.spShared.debugLog("Deprecated:","".concat(t," is no longer used."))},t}),{}),{isCustomAmountFieldValid:function(t,e){return Object(l.b)(null,t,e)},initDateField:function(t){return Object(r.a)(null,t,null)},handleCustomAmountFocusIn:function(t,e){return Object(l.a)(null,t,e)},processCustomAmount:function(t,e){return Object(l.b)(null,t,e)},updateAmountSelect:function(t,e){return Object(i.a)(null,t,e)},updateQuantitySelect:function(t,e){return updateQuantityField(null,t,e)},updateTotalAmountLabel:function(t,e){return Object(a.a)(null,t,e)},updateRecurringAmountLabel:function(t,e){return Object(a.a)(null,t,e)},updateTaxAmountLabel:function(t,e){return Object(a.a)(null,t,e)},changeMultiSubAmount:function(t,e){return Object(u.a)(null,t,e)},enablePaymentRequestButton:function(t,e){return Object(p.c)(null,t,e)},bindProFormEventsAndTriggers:function(t,e,n){return window.simpayAppPro.bindEvents(t,e,n)},handleFieldFocus:function(t){return window.simpayAppPro.setOnFieldFocus(t)},enableForm:function(t,e){return window.simpayApp.enableForm(t,e)},disableForm:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return window.simpayApp.disableForm(t,e,n)},triggerBrowserValidation:function(t,e){return window.simpayApp.triggerBrowserValidation(t,e)},setProFinalAmount:function(t,e,n){return window.simpayAppPro.updateAmounts(t,e,n)},calculateTaxAmount:function(t,e){return(0,window.spShared.debugLog)("calculateTaxAmount","Use spFormElem.cart to access cart tax calculations"),Math.abs(accounting.toFixed(t*(e/100),window.spGeneral.integers.decimalPlaces))},updatePaymentRequestButton:p.d,paymentRequestIsValid:p.b,getPaymentRequestDisplayItems:p.a,toggleShippingAddressFields:c.a,applyCoupon:o.a,removeCoupon:o.b,toggleOverlayForm:s.b})},,,,,function(t,e,n){"use strict";n.r(e),function(t){var r=n(0),o=n.n(r),i=n(38),a=n(20),u=n(32),c=n(29),s=n(11),l=n(28),p=n(30),f=n(27),d=n(31),m=n(18),y=n(12),h=n(17);function g(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}var v,b,w={};b=(v=t)(document.body),(w=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?g(Object(n),!0).forEach((function(e){o()(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({paymentRequestButtons:{},init:function(){this.bindEvents=this.bindEvents.bind(this),b.on("simpayCoreFormVarsInitialized",a.b),b.on("simpayBindCoreFormEventsAndTriggers",u.a),b.on("simpayBindCoreFormEventsAndTriggers",c.a),b.on("simpayBindCoreFormEventsAndTriggers",this.bindEvents),b.on("simpayBindCoreFormEventsAndTriggers",y.b),b.on("simpayBindCoreFormEventsAndTriggers",p.a),b.on("simpayBindCoreFormEventsAndTriggers",f.a),b.on("simpayBindCoreFormEventsAndTriggers",l.a),b.on("simpayBindCoreFormEventsAndTriggers",s.a),b.on("simpayFinalizeCoreAmount",this.updateAmounts)},bindEvents:function(t,e,n){this.setOnFieldFocus(e),e.on("totalChanged",(function(t,e,n){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];!0===r&&Object(h.b)(e,n),Object(s.a)(t,e,n),Object(m.d)(e,n)})),e.on("simpayBeforeStripePayment",(function(t,e,n){e.trigger("simpayFormValidationInitialized");var r=Object(y.b)(t,e,n,!1);n.isValid=r})),e.find(".simpay-custom-amount-input").on("focusout",(function(t){return Object(y.b)(t,e,n)})),e.find(".simpay-custom-amount-input").on("focusin",(function(t){return Object(y.a)(t,e,n)})),e.find(".simpay-apply-coupon").on("click",(function(t){return t.preventDefault(),Object(h.a)(e,n)})),e.find(".simpay-coupon-field").on("keypress",(function(t){if(13===t.which)return t.preventDefault(),Object(h.a)(e,n)})),e.find(".simpay-remove-coupon").on("click",(function(t){return t.preventDefault(),Object(h.b)(e,n)})),e.find(".simpay-multi-sub, .simpay-plan-wrapper select").on("change",(function(t){return Object(l.a)(t,e,n)})),e.find(".simpay-quantity-input, .simpay-quantity-dropdown").on("change",(function(t){return Object(p.a)(t,e,n)})),e.find(".simpay-amount-dropdown, .simpay-amount-radio").on("change",(function(t){return Object(f.a)(t,e,n)})),e.find(".simpay-same-address-toggle").on("change",(function(t){return Object(d.a)(e,n)})),e.find('input[name="recurring_amount_toggle"]').on("change",(function(t){n.isRecurring=t.target.checked})),b.trigger("simpayBindProFormEventsAndTriggers",[e,n])},setOnFieldFocus:function(t,e){t.find(".simpay-form-control").each((function(t,e){var n=v(e);n.on("focusin",(function(t){v(t.target).addClass("is-focused")})),n.on("focusout",(function(t){var e=v(t.target);setTimeout((function(){e.removeClass("is-focused"),n.val()?e.addClass("is-filled"):e.removeClass("is-filled")}),300)}))}))},updateAmounts:function(t,e,n){var r=window.spShared,o=r.convertToDollars,i=r.debugLog;try{var a=e.cart,u=a.getTotal();n.finalAmount=o(u),n.stripeParams.amount=u,e.find(".simpay-amount").val(u),e.find(".simpay-tax-amount").val(o(a.getTax()))}catch(t){i(t)}}},i.a)).init(),window.simpayAppPro=w,e.default=w}.call(this,n(5))}]);
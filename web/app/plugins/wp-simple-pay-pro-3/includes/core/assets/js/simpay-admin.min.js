!function(e){var t={};function n(i){if(t[i])return t[i].exports;var r=t[i]={i:i,l:!1,exports:{}};return e[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=325)}({136:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(27);function r(e,t){if(e!==t){var n=document.getElementById("simpay-test-mode-toggle-notice"),i=document.getElementById("simpay-toggle-notice-status"),r=document.getElementById("simpay-toggle-notice-status-link");n.classList.add("notice"),n.classList.add("notice-warning"),n.style.display="block",i&&r&&(i.innerHTML="<strong>"+i.dataset[e]+"</strong>",r.href=r.dataset[e])}}Object(i.a)((function(){var e=document.getElementById("simpay-stripe-account-info");e&&wp.ajax.send("simpay_stripe_connect_account_information",{data:{nonce:e.dataset.nonce,account_id:e.dataset.accountId},success:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block",e.classList.add("notice"),"simpay-stripe-activated-account-actions"===t.actions?e.classList.add("notice-info"):e.classList.add("notice-warning");var n=document.getElementById(t.actions);n&&(n.style.display="block")},error:function(t){e.querySelector("p").innerHTML=t.message,e.style.display="block",e.classList.add("notice"),e.classList.add("notice-error");var n=document.getElementById(t.actions);n&&(n.style.display="block")}})}))},138:function(e,t,n){"use strict";var i=function(e){return"string"!=typeof e||""===e?(console.error("The namespace must be a non-empty string."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.\-\/]*$/.test(e)||(console.error("The namespace can only contain numbers, letters, dashes, periods, underscores and slashes."),!1)};var r=function(e){return"string"!=typeof e||""===e?(console.error("The hook name must be a non-empty string."),!1):/^__/.test(e)?(console.error("The hook name cannot begin with `__`."),!1):!!/^[a-zA-Z][a-zA-Z0-9_.-]*$/.test(e)||(console.error("The hook name can only contain numbers, letters, dashes, periods and underscores."),!1)};var o=function(e){return function(t,n,o){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(r(t)&&i(n))if("function"==typeof o)if("number"==typeof a){var s={callback:o,priority:a,namespace:n};if(e[t]){var c,l=e[t].handlers;for(c=l.length;c>0&&!(a>=l[c-1].priority);c--);c===l.length?l[c]=s:l.splice(c,0,s),(e.__current||[]).forEach((function(e){e.name===t&&e.currentIndex>=c&&e.currentIndex++}))}else e[t]={handlers:[s],runs:0};"hookAdded"!==t&&m("hookAdded",t,n,o,a)}else console.error("If specified, the hook priority must be a number.");else console.error("The hook callback must be a function.")}};var a=function(e,t){return function(n,o){if(r(n)&&(t||i(o))){if(!e[n])return 0;var a=0;if(t)a=e[n].handlers.length,e[n]={runs:e[n].runs,handlers:[]};else for(var s=e[n].handlers,c=function(t){s[t].namespace===o&&(s.splice(t,1),a++,(e.__current||[]).forEach((function(e){e.name===n&&e.currentIndex>=t&&e.currentIndex--})))},l=s.length-1;l>=0;l--)c(l);return"hookRemoved"!==n&&m("hookRemoved",n,o),a}}};var s=function(e){return function(t,n){return void 0!==n?t in e&&e[t].handlers.some((function(e){return e.namespace===n})):t in e}};var c=function(e,t){return function(n){e[n]||(e[n]={handlers:[],runs:0}),e[n].runs++;var i=e[n].handlers;for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];if(!i||!i.length)return t?o[0]:void 0;var s={name:n,currentIndex:0};for(e.__current.push(s);s.currentIndex<i.length;){var c=i[s.currentIndex],l=c.callback.apply(null,o);t&&(o[0]=l),s.currentIndex++}return e.__current.pop(),t?o[0]:void 0}};var l=function(e){return function(){return e.__current&&e.__current.length?e.__current[e.__current.length-1].name:null}};var d=function(e){return function(t){return void 0===t?void 0!==e.__current[0]:!!e.__current[0]&&t===e.__current[0].name}};var u=function(e){return function(t){if(r(t))return e[t]&&e[t].runs?e[t].runs:0}};var p=function(){var e=Object.create(null),t=Object.create(null);return e.__current=[],t.__current=[],{addAction:o(e),addFilter:o(t),removeAction:a(e),removeFilter:a(t),hasAction:s(e),hasFilter:s(t),removeAllActions:a(e,!0),removeAllFilters:a(t,!0),doAction:c(e),applyFilters:c(t,!0),currentAction:l(e),currentFilter:l(t),doingAction:d(e),doingFilter:d(t),didAction:u(e),didFilter:u(t),actions:e,filters:t}};n.d(t,"b",(function(){return m})),n.d(t,"a",(function(){return p}));var f=p(),m=(f.addAction,f.addFilter,f.removeAction,f.removeFilter,f.hasAction,f.hasFilter,f.removeAllActions,f.removeAllFilters,f.doAction);f.applyFilters,f.currentAction,f.currentFilter,f.doingAction,f.doingFilter,f.didAction,f.didFilter,f.actions,f.filters},27:function(e,t,n){"use strict";function i(e){"complete"!==document.readyState&&"interactive"!==document.readyState?document.addEventListener("DOMContentLoaded",e):e()}n.d(t,"a",(function(){return i}))},325:function(e,t,n){"use strict";n.r(t),function(e){var t=n(138),i=(n(326),n(136));window.wpspHooks=Object(t.a)();var r,o,a,s={};s={init:function(){wpspHooks.addAction("settings.toggleTestMode","wpsp/settings/stripe-connect",i.a),o=r(document.body),a=o.find("#simpay-form-settings"),this.setupChosen(),this.addMediaFields(),this.handleMetaboxTabClick(),this.stripeConnect(),a.on("click.simpayTabLink",".simpay-tab-link",(function(e){e.preventDefault(),s.handleInternalLinkToTabClicks(r(this))})),a.on("click.simpayImagePreview",".simpay-remove-image-preview",(function(e){s.handleRemoveImagePreviewClick(e)})),a.find(".simpay-panel-field").on("change.simpaySectionToggle",".simpay-section-toggle",(function(e){s.initSectionToggle(r(this))})),o.find(".simpay-button").on("click.simpayShowSpinner",(function(e){s.showSpinner(r(this))})),o.find("#simpay-preview-button").on("click.simpayPreviewButton",(function(e){s.handlePreviewButton(r(this),e)})),o.find("#post").on("keypress.simpaySubmitOnEnter",(function(e){s.handleSubmitOnEnter(r(this),e)})),a.find('.simpay-multi-toggle input[type="radio"]:checked').each((function(){s.initMultiToggle(r(this))})),a.on("change.simpayMultiToggle",'.simpay-multi-toggle input[type="radio"]',(function(){s.initMultiToggle(r(this))})),o.find(".simpay-amount-input").trigger("blur.validateAndUpdateAmount"),o.trigger("simpayAdminInit")},handleSubmitOnEnter:function(e,t){var n,i,r;13===(t.keyCode?t.keyCode:t.which)&&(i=(n=e.closest("form")).find("#save-post"),r=n.find("#publish"),i.length>0?i.click():r.click())},handlePreviewButton:function(e,t){var n,i;t.preventDefault(),n=(i=e.closest("form")).attr("action"),i.attr("action",e.data("action")),i.attr("target","_blank"),i.submit(),i.attr("action",n),i.attr("target","")},showSpinner:function(e){e.parent().find(".spinner").css("visibility","visible")},handleRemoveImagePreviewClick:function(e){e.preventDefault(),a.find(".simpay-image-preview-wrap").hide(),a.find("#_image_url").val("")},addMediaFields:function(){var e;r(".simpay-media-uploader").on("click",(function(t){t.preventDefault(),window.simpayMediaUploaderInputField=r(this),e?e.open():((e=wp.media.frames.file_frame=wp.media({title:spGeneral.i18n.mediaTitle,button:{text:spGeneral.i18n.mediaButtonText},multiple:!1})).on("select",(function(){var t=e.state().get("selection").first().toJSON(),n=window.simpayMediaUploaderInputField.prev(),i="id"===n.data("fvalue")?t.id:t.url;r(".simpay-image-preview-wrap").show(),r(".simpay-image-preview").prop("src",i),n.val(i)})),e.open())}))},setupChosen:function(){var e=r(".simpay-chosen-select, .simpay-chosen-search");e.chosen({disable_search_threshold:20}),e.chosen()},handleMetaboxTabClick:function(){var e=r("ul.simpay-tabs a"),t=r("div.simpay-panel"),n=e.parents("li"),i={};e.on("click",(function(e){var i=r(this).parent(),o=r(r(this).attr("href"));location.hash=r(this).attr("href"),e.preventDefault(),n.removeClass("active"),i.addClass("active"),t.addClass("simpay-panel-hidden"),o.removeClass("simpay-panel-hidden"),e.stopPropagation()})),location.hash.length&&(setTimeout((function(){window.scrollTo(0,0)}),1),(i=r('ul.simpay-tabs a[href="'+location.hash+'"]')).length&&i.click())},stripeConnect:function(){r("#simpay-settings-keys-mode-test-mode").closest(".form-table").prev().hide().prev().hide(),r("#wpsp-api-keys-row-reveal button").click((function(e){e.preventDefault(),r("#simpay-settings-keys-mode-test-mode").closest(".form-table").prev().show().prev().show(),r("#wpsp-api-keys-row-hide").show(),r(this).parent().hide()})),r("#wpsp-api-keys-row-hide button").click((function(e){e.preventDefault(),r("#simpay-settings-keys-mode-test-mode").closest(".form-table").prev().hide().prev().hide(),r("#wpsp-api-keys-row-reveal").show(),r(this).parent().hide()}))},handleInternalLinkToTabClicks:function(e){var t=e.data("show-tab");o.find("."+t+"-tab a").click()},initSectionToggle:function(e){var t=e.data("show");e.is(":checked")?e.closest(".simpay-panel-field").parent().find(t).show():e.closest(".simpay-panel-field").parent().find(t).hide()},initMultiToggle:function(e){var t=e.attr("id");e.closest(".simpay-field-radios-inline").find('input[type="radio"]').each((function(e){a.find(".toggle-"+r(this).attr("id")).hide()})),a.find(".toggle-"+t).show()}},(r=e)(document).ready((function(e){s.init()}))}.call(this,n(48))},326:function(e,t,n){"use strict";var i=n(27);Object(i.a)((function(){var e=document.querySelectorAll('[name="simpay_settings_keys[mode][test_mode]"]'),t=document.querySelector('[name="simpay_settings_keys[mode][test_mode]"]:checked');if(0!==e.length){var n="enabled"===t.value?"test":"live";wpspHooks.doAction("settings.toggleTestMode",n,n),_.each(e,(function(e){return e.addEventListener("change",(function(e){var t="enabled"===e.target.value?"test":"live";wpspHooks.doAction("settings.toggleTestMode",t,"test"===t?"live":"test")}))}))}}))},48:function(e,t){e.exports=jQuery}});